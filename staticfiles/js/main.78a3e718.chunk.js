(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{255:function(e,t,a){e.exports=a(440)},440:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(19),i=a.n(o),s=a(16),l=a.n(s),c=a(23),p=a(38),m=a(12),d=a(13),u=a(15),h=a(14),_=a(220),g=a(24),f=a(500),E=a(499),y=a(509),v=a(221),b=Object(v.a)({palette:{type:"dark"}}),w=Object(v.a)({palette:{type:"light",background:{default:"#F1F1F1"}}}),k=a(476),S=a(91),j=a(5),O=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){this.props.theme;return n.a.createElement(k.a,{container:!0,direction:"column",alignItems:"center"},n.a.createElement(S.a,{variant:"h1",style:{color:"dark"===this.props.theme.palette.type?this.props.theme.palette.common.white:this.props.theme.palette.common.black}},"404"))}}]),a}(n.a.Component),x=Object(j.a)({},{withTheme:!0})(O),C=a(485),D=a(486),N=a(442),I=a(487),L=a(503),T=a(491),F="/",M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return R(e,t)},P=function(e,t,a){return R(e,{method:"POST",params:JSON.stringify(t),opts:a})},W=function(e,t,a){return R(e,{method:"PUT",params:JSON.stringify(t),headers:{"Content-Type":"application/json"}})},R=function(){var e=Object(c.a)(l.a.mark((function e(t,a){var r,n,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem("token"),n=F+t,console.log(n),o=a.method||"GET",a.headers=a.headers||{},a.headers.Accept="application/json",a.headers["Content-Type"]="application/json",null!==r&&(a.headers.Authorization="Token ".concat(r)),e.abrupt("return",new Promise((function(e,t){var r=new XMLHttpRequest,i=a.params;r.open(o,n),r.onload=function(){e(this)},r.onerror=function(){t({status:r.status,response:JSON.parse(r.response)})},i&&"object"===typeof i&&(i=Object.keys(i).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(i[e])})).join("&")),a.headers&&Object.keys(a.headers).forEach((function(e){r.setRequestHeader(e,a.headers[e])})),r.send(i)})));case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),z=a(10),G=function(e){return e>1e9?(e/1e9).toString()+"B":e>1e6?(e/1e6).toString()+"M":e>1e3?(e/1e3).toString()+"K":e.toFixed(1).toString()},H=function(e){return e.toFixed(1)+"%"},U=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).state={},r}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.theme;switch(this.props.graph_type){case"investments":return n.a.createElement(z.b,{height:.82*this.props.height,width:.98*this.props.width,data:this.props.data},n.a.createElement(z.e,{strokeDasharray:"3 3"}),n.a.createElement(z.m,{dataKey:"name",fill:"dark"===this.props.theme.palette.type?this.props.theme.palette.common.white:this.props.theme.palette.common.black}),n.a.createElement(z.n,{tickFormatter:G,fill:"dark"===this.props.theme.palette.type?this.props.theme.palette.common.white:this.props.theme.palette.common.black}),n.a.createElement(z.l,null),n.a.createElement(z.a,{type:"monotone",dataKey:"total_invested_value",stackId:"1",stroke:"dark"===e.palette.type?e.palette.secondary.dark:e.palette.secondary.light,fill:"dark"===e.palette.type?e.palette.secondary.dark:e.palette.secondary.light}));case"cash":return n.a.createElement(z.b,{height:.82*this.props.height,width:.98*this.props.width,data:this.props.data},n.a.createElement(z.e,{strokeDasharray:"3 3"}),n.a.createElement(z.m,{dataKey:"name",fill:"dark"===this.props.theme.palette.type?this.props.theme.palette.common.white:this.props.theme.palette.common.black}),n.a.createElement(z.n,{tickFormatter:G,fill:"dark"===this.props.theme.palette.type?this.props.theme.palette.common.white:this.props.theme.palette.common.black}),n.a.createElement(z.l,null),n.a.createElement(z.a,{type:"monotone",dataKey:"cash",stackId:"1",stroke:"dark"===e.palette.type?e.palette.primary.dark:e.palette.primary.light,fill:"dark"===e.palette.type?e.palette.primary.dark:e.palette.primary.light}));case"cash_investments":return n.a.createElement(z.b,{height:.82*this.props.height,width:.98*this.props.width,data:this.props.data},n.a.createElement(z.e,{strokeDasharray:"3 3"}),n.a.createElement(z.m,{dataKey:"name",fill:"dark"===this.props.theme.palette.type?this.props.theme.palette.common.white:this.props.theme.palette.common.black}),n.a.createElement(z.n,{tickFormatter:G,fill:"dark"===this.props.theme.palette.type?this.props.theme.palette.common.white:this.props.theme.palette.common.black}),n.a.createElement(z.l,null),n.a.createElement(z.a,{type:"monotone",dataKey:"total_invested_value",stackId:"1",stroke:"dark"===e.palette.type?e.palette.secondary.dark:e.palette.secondary.light,fill:"dark"===e.palette.type?e.palette.secondary.dark:e.palette.secondary.light}),n.a.createElement(z.a,{type:"monotone",dataKey:"cash",stackId:"1",stroke:"dark"===e.palette.type?e.palette.primary.dark:e.palette.primary.light,fill:"dark"===e.palette.type?e.palette.primary.dark:e.palette.primary.light}));case"performance_pct":return n.a.createElement(z.d,{height:.82*this.props.height,width:.98*this.props.width,data:this.props.data},n.a.createElement(z.e,{strokeDasharray:"3 3"}),n.a.createElement(z.m,{dataKey:"name"}),n.a.createElement(z.n,{tickFormatter:H,domain:[-10,10]}),n.a.createElement(z.c,{dataKey:"perf"},this.props.data.map((function(e,t){return n.a.createElement(z.f,{key:e.name,fill:e.perf>0?"green":"red"})})),n.a.createElement(z.g,{dataKey:"perf",position:"top",formatter:H})));case"performance_curr":return n.a.createElement(z.d,{height:.82*this.props.height,width:.98*this.props.width,data:this.props.data},n.a.createElement(z.e,{strokeDasharray:"3 3"}),n.a.createElement(z.m,{dataKey:"name"}),n.a.createElement(z.n,{tickFormatter:G}),n.a.createElement(z.c,{dataKey:"diff"},this.props.data.map((function(e,t){return n.a.createElement(z.f,{key:e.name,fill:e.diff>0?"green":"red"})})),n.a.createElement(z.g,{dataKey:"diff",position:"top",formatter:G})))}}}]),a}(n.a.Component),J=Object(j.a)({},{withTheme:!0})(U),A=a(479),K=a(480),Z=a(481),V=a(482),B=a(483),q=a(511),$=a(507),X=a(484),Y=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).total_balance=function(e){return e.last_portfolio_history.cash+e.last_portfolio_history.total_invested_value},r.holding_duration=function(e,t){var a=Math.abs(new Date(e)-new Date(t))/1e3,r=Math.floor(a/86400);a-=86400*r;var n=Math.floor(a/3600)%24;return a-=3600*n,r<1?"".concat((n/24).toLocaleString(void 0,{maximumFractionDigits:2})," day"):"".concat(r,",").concat((n/24).toLocaleString(void 0,{maximumFractionDigits:0})," days")},r.name_sorter=function(e,t){"asc"===t?r.props.portfolio.current_positions.sort((function(t,a){return t.stock[e].localeCompare(a.stock[e])})):r.props.portfolio.current_positions.sort((function(t,a){return a.stock[e].localeCompare(t.stock[e])}))},r.number_sorter=function(e,t){"asc"===t?r.props.portfolio.current_positions.sort((function(t,a){return t[e]<a[e]?1:-1})):r.props.portfolio.current_positions.sort((function(t,a){return t[e]>a[e]?1:-1}))},r.p_l_sorter=function(e,t){"asc"===t?r.props.portfolio.current_positions.sort((function(e,t){return(e.current_rate-e.open_rate)*e.num_of_shares<(t.current_rate-t.open_rate)*t.num_of_shares?1:-1})):r.props.portfolio.current_positions.sort((function(e,t){return(e.current_rate-e.open_rate)*e.num_of_shares>(t.current_rate-t.open_rate)*t.num_of_shares?1:-1}))},r.sorter=function(e,t){switch(e){case"symbol":case"name":case"sector":r.name_sorter(e,t);break;case"total_investment":r.number_sorter(e,t);break;case"alloc_percentage":r.number_sorter("total_investment",t);break;case"P_L":r.p_l_sorter(e,t);break;case"open_date":r.number_sorter(e,t);break;default:console.log("Unknown col")}},r.handleSorting=function(e){"asc"===r.state.sorting_dir?(r.sorter(e.currentTarget.id,"desc"),r.setState({sorting_col:e.currentTarget.id,sorting_dir:"desc"})):(r.sorter(e.currentTarget.id,"asc"),r.setState({sorting_col:e.currentTarget.id,sorting_dir:"asc"}))},r.state={sorting_col:"total_investment",sorting_dir:"asc"},r}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=(t.classes,t.theme,t.portfolio),r=new Date,o=r.getDay();0===o||6===o||1===o?(1===o&&r.setDate(r.getDate()-3),0===o&&r.setDate(r.getDate()-2),6===o&&r.setDate(r.getDate()-1)):r.setDate(r.getDate()-1);var i=r.getDate(),s=r.getMonth()+1;r.getFullYear(),("0"+s).slice(-2),("0"+i).slice(-2);return n.a.createElement(k.a,{item:!0,xs:12,sm:12},n.a.createElement(N.a,{style:{padding:5}},n.a.createElement(S.a,{variant:"h5",style:{display:"inline-block",padding:5}}," Portfolio "),n.a.createElement(A.a,{component:N.a,style:{overflow:"auto",height:"300px"}},n.a.createElement(K.a,{size:"small",stickyHeader:!0,"aria-label":"sticky table"},n.a.createElement(Z.a,null,n.a.createElement(V.a,null,n.a.createElement(B.a,null,"Ticker",n.a.createElement(q.a,{active:"symbol"===this.state.sorting_col,direction:this.state.sorting_dir,id:"symbol",onClick:function(t){e.handleSorting(t)}})),n.a.createElement($.a,{smDown:!0},n.a.createElement(B.a,null,"Name",n.a.createElement(q.a,{active:"name"===this.state.sorting_col,direction:this.state.sorting_dir,id:"name",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,null,"Sector",n.a.createElement(q.a,{active:"sector"===this.state.sorting_col,direction:this.state.sorting_dir,id:"sector",onClick:function(t){e.handleSorting(t)}}))),n.a.createElement(B.a,{align:"right"},"Amount",n.a.createElement(q.a,{active:"total_investment"===this.state.sorting_col,direction:this.state.sorting_dir,id:"total_investment",onClick:function(t){e.handleSorting(t)}})),n.a.createElement($.a,{smDown:!0},n.a.createElement(B.a,{align:"right"},"%",n.a.createElement(q.a,{active:"alloc_percentage"===this.state.sorting_col,direction:this.state.sorting_dir,id:"alloc_percentage",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,{align:"right"},"P/L $",n.a.createElement(q.a,{active:"P_L_$"===this.state.sorting_col,direction:this.state.sorting_dir,id:"P_L",onClick:function(t){e.handleSorting(t)}}))),n.a.createElement(B.a,{align:"right"},"P/L %",n.a.createElement(q.a,{active:"P_L_%"===this.state.sorting_col,direction:this.state.sorting_dir,id:"P_L",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,{align:"right"},"Duration",n.a.createElement(q.a,{active:"open_date"===this.state.sorting_col,direction:this.state.sorting_dir,id:"open_date",onClick:function(t){e.handleSorting(t)}})))),n.a.createElement(X.a,null,null!=a&&a.current_positions.map((function(t,r){return n.a.createElement(V.a,{hover:!0,key:t.id,onClick:function(){e.props.history.push("/position/?id="+t.id)}},n.a.createElement(B.a,{component:"th",scope:"row"},t.stock.symbol.substring(0,20),"  "),n.a.createElement($.a,{smDown:!0},n.a.createElement(B.a,{component:"th",scope:"row"},t.stock.name.substring(0,20),"  "),n.a.createElement(B.a,{scope:"row"},t.stock.sector,"  ")),n.a.createElement(B.a,{align:"right"}," ",t.total_investment.toLocaleString(void 0,{maximumFractionDigits:0})," "),n.a.createElement($.a,{smDown:!0},n.a.createElement(B.a,{align:"right"}," ",(t.total_investment/e.total_balance(a.portfolio)*100).toFixed(2),"% "),n.a.createElement(B.a,{align:"right",style:{color:t.current_rate>t.open_rate?"green":"red"}},((t.current_rate-t.open_rate)*t.num_of_shares).toLocaleString(void 0,{maximumFractionDigits:0}))),n.a.createElement(B.a,{align:"right",style:{color:t.current_rate>t.open_rate?"green":"red"}},(100*(t.current_rate/t.open_rate-1)).toFixed(2),"%"),n.a.createElement(B.a,{align:"right",style:{color:null===t.open_date&&"red"}}," ",null===t.open_date?"None":e.holding_duration(t.open_date,new Date)," "))})))))))}}]),a}(n.a.Component),Q=Object(j.a)({},{withTheme:!0})(Y),ee=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).name_sorter=function(e,t){"asc"===t?r.props.portfolio.pending_buy_orders.sort((function(t,a){return t.stock[e].localeCompare(a.stock[e])})):r.props.portfolio.pending_buy_orders.sort((function(t,a){return a.stock[e].localeCompare(t.stock[e])}))},r.number_sorter=function(e,t){"asc"===t?r.props.portfolio.pending_buy_orders.sort((function(t,a){return t[e]<a[e]?1:-1})):r.props.portfolio.pending_buy_orders.sort((function(t,a){return t[e]>a[e]?1:-1}))},r.p_l_sorter=function(e,t){"asc"===t?r.props.portfolio.pending_buy_orders.sort((function(e,t){return(e.current_rate-e.open_rate)*e.num_of_shares<(t.current_rate-t.open_rate)*t.num_of_shares?1:-1})):r.props.portfolio.pending_buy_orders.sort((function(e,t){return(e.current_rate-e.open_rate)*e.num_of_shares>(t.current_rate-t.open_rate)*t.num_of_shares?1:-1}))},r.sorter=function(e,t){switch(console.log("sorter"),e){case"symbol":case"name":r.name_sorter(e,t);break;case"total_investment":case"price_date":case"order_rate":case"current_rate":case"created_at":case"submited_at":case"canceled_at":r.number_sorter(e,t);break;default:console.log("Unknown col")}},r.handleSorting=function(e){"asc"===r.state.sorting_dir?(r.sorter(e.currentTarget.id,"desc"),r.setState({sorting_col:e.currentTarget.id,sorting_dir:"desc"})):(r.sorter(e.currentTarget.id,"asc"),r.setState({sorting_col:e.currentTarget.id,sorting_dir:"asc"}))},r.state={sorting_col:"total_investment",sorting_dir:"asc"},r}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=(t.classes,t.theme,t.portfolio);return n.a.createElement(k.a,{item:!0,xs:12,sm:12},n.a.createElement(N.a,{style:{padding:5}},n.a.createElement(S.a,{variant:"h5",style:{display:"inline-block",padding:5}}," Buy Orders "),n.a.createElement(A.a,{component:N.a,style:{overflow:"auto",height:"300px"}},n.a.createElement(K.a,{size:"small",stickyHeader:!0,"aria-label":"sticky table"},n.a.createElement(Z.a,null,n.a.createElement(V.a,null,n.a.createElement(B.a,null,"Ticker",n.a.createElement(q.a,{active:"symbol"===this.state.sorting_col,direction:this.state.sorting_dir,id:"symbol",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,null,"Name",n.a.createElement(q.a,{active:"name"===this.state.sorting_col,direction:this.state.sorting_dir,id:"name",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,null,"Price date",n.a.createElement(q.a,{active:"price_date"===this.state.sorting_col,direction:this.state.sorting_dir,id:"price_date",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,null,"Neural network "),n.a.createElement(B.a,{align:"right"},"Amount",n.a.createElement(q.a,{active:"total_investment"===this.state.sorting_col,direction:this.state.sorting_dir,id:"total_investment",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,{align:"right"},"Order price",n.a.createElement(q.a,{active:"order_rate"===this.state.sorting_col,direction:this.state.sorting_dir,id:"order_rate",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,{align:"right"},"Current price",n.a.createElement(q.a,{active:"current_rate"===this.state.sorting_col,direction:this.state.sorting_dir,id:"current_rate",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,{align:"right"},"created_at",n.a.createElement(q.a,{active:"created_at"===this.state.sorting_col,direction:this.state.sorting_dir,id:"created_at",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,{align:"right"},"submited_at",n.a.createElement(q.a,{active:"submited_at"===this.state.sorting_col,direction:this.state.sorting_dir,id:"submited_at",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,{align:"right"},"canceled_at",n.a.createElement(q.a,{active:"canceled_at"===this.state.sorting_col,direction:this.state.sorting_dir,id:"canceled_at",onClick:function(t){e.handleSorting(t)}})))),n.a.createElement(X.a,null,null!=a&&a.pending_buy_orders.map((function(t){return n.a.createElement(V.a,{key:t.id,hover:!0,onClick:function(){e.props.history.push("/buy_order/?id="+t.id)}},n.a.createElement(B.a,{component:"th",scope:"row"},t.stock.symbol," "),n.a.createElement(B.a,{component:"th",scope:"row"},t.stock.name.substring(0,20)," "),n.a.createElement(B.a,{component:"th",scope:"row"},t.price_date," "),n.a.createElement(B.a,{component:"th",scope:"row"}," ","tst"),n.a.createElement(B.a,{align:"right"}," ",t.total_investment.toLocaleString(void 0,{maximumFractionDigits:0})," "),n.a.createElement(B.a,{align:"right"}," ",t.order_rate.toLocaleString(void 0,{maximumFractionDigits:0})," "),n.a.createElement(B.a,{align:"right"}," ",t.current_rate.toLocaleString(void 0,{maximumFractionDigits:0})," "),n.a.createElement(B.a,{align:"right"}," ",null===t.created_at?"-":new Date(t.created_at).toLocaleString({timeZoneName:"short"})," "),n.a.createElement(B.a,{align:"right"}," ",null===t.submited_at?"Not sent":new Date(t.submited_at).toLocaleString({timeZoneName:"short"})," "),n.a.createElement(B.a,{align:"right"}," ",null===t.canceled_at?"-":new Date(t.canceled_at).toLocaleString({timeZoneName:"short"})," "))})))))))}}]),a}(n.a.Component),te=Object(j.a)({},{withTheme:!0})(ee),ae=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).total_balance=function(e){return e.last_portfolio_history.cash+e.last_portfolio_history.total_invested_value},r.holding_duration=function(e,t){var a=Math.abs(new Date(e)-new Date(t))/1e3,r=Math.floor(a/86400);a-=86400*r;var n=Math.floor(a/3600)%24;return a-=3600*n,r<1?"".concat((n/24).toLocaleString(void 0,{maximumFractionDigits:2})," day"):"".concat(r,",").concat((n/24).toLocaleString(void 0,{maximumFractionDigits:0})," day(s)")},r.name_sorter=function(e,t){"asc"===t?r.props.portfolio.pending_sell_orders.sort((function(t,a){return t.stock[e].localeCompare(a.stock[e])})):r.props.portfolio.pending_sell_orders.sort((function(t,a){return a.stock[e].localeCompare(t.stock[e])}))},r.number_sorter=function(e,t){"submited_at"==e?"asc"===t?r.props.portfolio.pending_sell_orders.sort((function(t,a){return t.sell_order[0][e]<a.sell_order[0][e]?1:-1})):r.props.portfolio.pending_sell_orders.sort((function(t,a){return t.sell_order[0][e]>a.sell_order[0][e]?1:-1})):"asc"===t?r.props.portfolio.pending_sell_orders.sort((function(t,a){return t[e]<a[e]?1:-1})):r.props.portfolio.pending_sell_orders.sort((function(t,a){return t[e]>a[e]?1:-1}))},r.p_l_sorter=function(e,t){"asc"===t?r.props.portfolio.pending_sell_orders.sort((function(e,t){return(e.current_rate-e.open_rate)*e.num_of_shares<(t.current_rate-t.open_rate)*t.num_of_shares?1:-1})):r.props.portfolio.pending_sell_orders.sort((function(e,t){return(e.current_rate-e.open_rate)*e.num_of_shares>(t.current_rate-t.open_rate)*t.num_of_shares?1:-1}))},r.sorter=function(e,t){switch(e){case"symbol":case"name":case"sector":r.name_sorter(e,t);break;case"total_investment":r.number_sorter(e,t);break;case"alloc_percentage":r.number_sorter("total_investment",t);break;case"P_L":r.p_l_sorter(e,t);break;case"open_date":case"submited_at":r.number_sorter(e,t);break;default:console.log("Unknown col")}},r.handleSorting=function(e){"asc"===r.state.sorting_dir?(r.sorter(e.currentTarget.id,"desc"),r.setState({sorting_col:e.currentTarget.id,sorting_dir:"desc"})):(r.sorter(e.currentTarget.id,"asc"),r.setState({sorting_col:e.currentTarget.id,sorting_dir:"asc"}))},r.state={sorting_col:"total_investment",sorting_dir:"asc"},r}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=(t.classes,t.theme,t.portfolio),r=new Date,o=r.getDay();0===o||6===o||1===o?(1===o&&r.setDate(r.getDate()-3),0===o&&r.setDate(r.getDate()-2),6===o&&r.setDate(r.getDate()-1)):r.setDate(r.getDate()-1);var i=r.getDate(),s=r.getMonth()+1;r.getFullYear(),("0"+s).slice(-2),("0"+i).slice(-2);return n.a.createElement(k.a,{item:!0,xs:12,sm:12},n.a.createElement(N.a,{style:{padding:5}},n.a.createElement(S.a,{variant:"h5",style:{display:"inline-block",padding:5}}," Sell Orders "),n.a.createElement(A.a,{component:N.a,style:{overflow:"auto",height:"300px"}},n.a.createElement(K.a,{size:"small",stickyHeader:!0,"aria-label":"sticky table"},n.a.createElement(Z.a,null,n.a.createElement(V.a,null,n.a.createElement(B.a,null,"Ticker",n.a.createElement(q.a,{active:"symbol"===this.state.sorting_col,direction:this.state.sorting_dir,id:"symbol",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,null,"Name",n.a.createElement(q.a,{active:"name"===this.state.sorting_col,direction:this.state.sorting_dir,id:"name",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,null,"Sector",n.a.createElement(q.a,{active:"sector"===this.state.sorting_col,direction:this.state.sorting_dir,id:"sector",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,{align:"right"},"Amount",n.a.createElement(q.a,{active:"total_investment"===this.state.sorting_col,direction:this.state.sorting_dir,id:"total_investment",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,{align:"right"},"P/L $",n.a.createElement(q.a,{active:"P_L_$"===this.state.sorting_col,direction:this.state.sorting_dir,id:"P_L",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,{align:"right"},"P/L %",n.a.createElement(q.a,{active:"P_L_%"===this.state.sorting_col,direction:this.state.sorting_dir,id:"P_L",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,{align:"right"},"Duration",n.a.createElement(q.a,{active:"open_date"===this.state.sorting_col,direction:this.state.sorting_dir,id:"open_date",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,{align:"right"},"Submited",n.a.createElement(q.a,{active:"submited_at"===this.state.sorting_col,direction:this.state.sorting_dir,id:"submited_at",onClick:function(t){e.handleSorting(t)}})))),n.a.createElement(X.a,null,null!=a&&a.pending_sell_orders.map((function(t,a){return n.a.createElement(V.a,{hover:!0,key:t.id,onClick:function(){e.props.history.push("/position/?id="+t.id)}},n.a.createElement(B.a,{component:"th",scope:"row"},t.stock.symbol.substring(0,20),"  "),n.a.createElement(B.a,{component:"th",scope:"row"},t.stock.name.substring(0,20),"  "),n.a.createElement(B.a,{scope:"row"},t.stock.sector,"  "),n.a.createElement(B.a,{align:"right"}," ",t.total_investment.toLocaleString(void 0,{maximumFractionDigits:0})," "),n.a.createElement(B.a,{align:"right",style:{color:t.current_rate>t.open_rate?"green":"red"}},((t.current_rate-t.open_rate)*t.num_of_shares).toLocaleString(void 0,{maximumFractionDigits:0})),n.a.createElement(B.a,{align:"right",style:{color:t.current_rate>t.open_rate?"green":"red"}},(100*(t.current_rate/t.open_rate-1)).toFixed(2),"%"),n.a.createElement(B.a,{align:"right",style:{color:null===t.open_date&&"red"}}," ",null===t.open_date?"None":e.holding_duration(t.open_date,new Date)," "),n.a.createElement(B.a,{align:"right"}," ",null===t.sell_order[0].submited_at?"Not sent":new Date(t.sell_order[0].submited_at).toLocaleString({timeZoneName:"short"})," "))})))))))}}]),a}(n.a.Component),re=Object(j.a)({},{withTheme:!0})(ae),ne=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).componentDidMount=function(){window.addEventListener("resize",r.updateGraph),r.props.retrieve_home()},r.updateGraph=function(){null!==r.graphRef.current&&(r.state.g_height!==r.graphRef.current.clientHeight&&r.setState({g_height:r.graphRef.current.clientHeight}),r.state.g_width!==r.graphRef.current.clientWidth&&r.setState({g_width:r.graphRef.current.clientWidth}))},r.pie_chart_data=function(){var e=[];if(r.props.portfolio_type){if(void 0!==r.props.p_real.current_positions)for(var t=0;t<r.props.p_real.current_positions.length;t++){var a=r.props.p_real.current_positions[t].total_investment,n={name:"".concat(r.props.p_real.current_positions[t].stock.symbol," | ").concat(r.props.p_real.current_positions[t].stock.name.substring(0,10)),value:a};e.push(n)}}else if(void 0!==r.props.p_demo.current_positions)for(var o=0;o<r.props.p_demo.current_positions.length;o++){var i=r.props.p_demo.current_positions[o].total_investment,s={name:"".concat(r.props.p_demo.current_positions[o].stock.symbol," | ").concat(r.props.p_demo.current_positions[o].stock.name.substring(0,10)),value:i};e.push(s)}return e},r.area_chart_data=function(){var e=[];if(r.props.portfolio_type){if(null!=r.props.p_real&&void 0!==r.props.p_real.portfolio.history)for(var t=0;t<r.props.p_real.portfolio.history.length;t++){var a=r.props.p_real.portfolio.history[t].cash,n=r.props.p_real.portfolio.history[t].total_invested_value,o=null,i=null;if(0===t){var s=r.props.p_real.portfolio.first_portfolio_history.cash+r.props.p_real.portfolio.first_portfolio_history.total_invested_value+r.props.p_real.portfolio.first_portfolio_history.latent_p_l,l=r.props.p_real.portfolio.history[t].cash+r.props.p_real.portfolio.history[t].total_invested_value+r.props.p_real.portfolio.history[t].latent_p_l;o=100*(l/s-1),i=l-s}else{var c=r.props.p_real.portfolio.history[t-1].cash+r.props.p_real.portfolio.history[t-1].total_invested_value+r.props.p_real.portfolio.history[t-1].latent_p_l,p=r.props.p_real.portfolio.history[t].cash+r.props.p_real.portfolio.history[t].total_invested_value+r.props.p_real.portfolio.history[t].latent_p_l;o=100*(p/c-1),i=p-c}var m={name:r.props.p_real.portfolio.history[t].created_at.split("T")[0],cash:a,total_invested_value:n,perf:o,diff:i};e.push(m)}}else if(null!=r.props.p_demo&&void 0!==r.props.p_demo.portfolio.history)for(var d=0;d<r.props.p_demo.portfolio.history.length;d++){var u=r.props.p_demo.portfolio.history[d].cash,h=r.props.p_demo.portfolio.history[d].total_invested_value;o=null,i=null;if(0===d){var _=r.props.p_demo.portfolio.first_portfolio_history.cash+r.props.p_demo.portfolio.first_portfolio_history.total_invested_value+r.props.p_demo.portfolio.first_portfolio_history.latent_p_l,g=r.props.p_demo.portfolio.history[d].cash+r.props.p_demo.portfolio.history[d].total_invested_value+r.props.p_demo.portfolio.history[d].latent_p_l;o=100*(g/_-1),i=g-_}else{var f=r.props.p_demo.portfolio.history[d-1].cash+r.props.p_demo.portfolio.history[d-1].total_invested_value+r.props.p_demo.portfolio.history[d-1].latent_p_l,E=r.props.p_demo.portfolio.history[d].cash+r.props.p_demo.portfolio.history[d].total_invested_value+r.props.p_demo.portfolio.history[d].latent_p_l;o=100*(E/f-1),i=E-f}var y={name:r.props.p_demo.portfolio.history[d].created_at.split("T")[0],cash:u,total_invested_value:h,perf:o,diff:i};e.push(y)}return e},r.toggle_graph_dd=function(){r.setState({graph_dd:!r.state.graph_dd})},r.handle_graph_change=function(e){r.setState({graph_type:e.target.value})},r.state={graph_dd:!1,graph_type:"performance_pct",loading:!0,g_height:0,g_width:0,last_price_date:null,last_order_date:null,last_portfolio_date:null,last_submited_order_date:null},r.graphRef=n.a.createRef(),r}return Object(d.a)(a,[{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateGraph)}},{key:"componentDidUpdate",value:function(){0===this.state.g_height&&this.updateGraph()}},{key:"render",value:function(){var e=this;if(this.props.loading)return n.a.createElement(k.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}}," ",n.a.createElement(C.a,{color:"primary"}));var t=null,a=null,r=null,o=null,i=null,s=null,l=null,c=null,p=null,m=null,d=null,u=null;return this.props.portfolio_type?null!=this.props.p_real.portfolio&&void 0!==this.props.p_real.portfolio.history&&0!==this.props.p_real.portfolio.history.length&&(t=this.props.p_real.portfolio.active?"Active":"Inactive",a=this.props.p_real.portfolio.created_at.split("T")[0],r=new Date(this.props.p_real.portfolio.updated_at).toLocaleString({timeZoneName:"short"}),o=this.props.p_real.portfolio.currency,i=this.props.p_real.portfolio.first_portfolio_history.cash+this.props.p_real.portfolio.first_portfolio_history.total_invested_value+this.props.p_real.portfolio.first_portfolio_history.latent_p_l,m=(p=(s=this.props.p_real.portfolio.last_portfolio_history.cash)+(l=this.props.p_real.portfolio.last_portfolio_history.total_invested_value)+(c=this.props.p_real.portfolio.last_portfolio_history.latent_p_l))/i-1,d=Math.abs(new Date(this.props.p_real.portfolio.first_portfolio_history.created_at)-new Date(this.props.p_real.portfolio.last_portfolio_history.created_at))/1e3/86400,u=Math.pow(1+m,365/d)-1):null!=this.props.p_demo&&this.props.p_demo.portfolio.history&&0!==this.props.p_demo.portfolio.history.length&&(t=this.props.p_demo.portfolio.active?"Active":"Inactive",a=this.props.p_demo.portfolio.created_at.split("T")[0],r=new Date(this.props.p_demo.portfolio.updated_at).toLocaleString({timeZoneName:"short"}),o=this.props.p_demo.portfolio.currency,i=this.props.p_demo.portfolio.first_portfolio_history.cash+this.props.p_demo.portfolio.first_portfolio_history.total_invested_value+this.props.p_demo.portfolio.first_portfolio_history.latent_p_l,m=(p=(s=this.props.p_demo.portfolio.last_portfolio_history.cash)+(l=this.props.p_demo.portfolio.last_portfolio_history.total_invested_value)+(c=this.props.p_demo.portfolio.last_portfolio_history.latent_p_l))/i-1,d=Math.abs(new Date(this.props.p_demo.portfolio.first_portfolio_history.created_at)-new Date(this.props.p_demo.portfolio.last_portfolio_history.created_at))/1e3/86400,u=Math.pow(1+m,365/d)-1),n.a.createElement(D.a,null,n.a.createElement(k.a,{container:!0,direction:"row",spacing:1},n.a.createElement(k.a,{item:!0,xs:12,sm:6},n.a.createElement(N.a,{style:{padding:5,flexGrow:1}},n.a.createElement(S.a,{variant:"h6"},"Summary"),n.a.createElement(k.a,{container:!0,justify:"space-between"},n.a.createElement(S.a,{variant:"body1"}," Portfolio type: "),n.a.createElement(S.a,{variant:"body1"}," ",this.props.portfolio_type?"REAL":"DEMO"," ")),n.a.createElement(k.a,{container:!0,justify:"space-between"},n.a.createElement(S.a,{variant:"body1"}," Portfolio status: "),n.a.createElement(S.a,{variant:"body1"}," ",t," ")),n.a.createElement(k.a,{container:!0,justify:"space-between"},n.a.createElement(S.a,{variant:"body1"}," Creation date: "),n.a.createElement(S.a,{variant:"body1"}," ",a," ")),n.a.createElement(k.a,{container:!0,justify:"space-between"},n.a.createElement(S.a,{variant:"body1"}," Last update: "),n.a.createElement(S.a,{variant:"body1"}," ",r," ")),n.a.createElement(k.a,{container:!0,justify:"space-between"},n.a.createElement(S.a,{variant:"body1"}," Currency: "),n.a.createElement(S.a,{variant:"body1"}," ",o," ")),n.a.createElement(k.a,{container:!0,justify:"space-between"},n.a.createElement(S.a,{variant:"body1"}," Initial balance: "),n.a.createElement(S.a,{variant:"body1"}," ",i," ")),n.a.createElement(k.a,{container:!0,justify:"space-between"},n.a.createElement(S.a,{variant:"body1"}," Cash: "),n.a.createElement(S.a,{variant:"body1"}," ",s," ")),n.a.createElement(k.a,{container:!0,justify:"space-between"},n.a.createElement(S.a,{variant:"body1"}," Investments: "),n.a.createElement(S.a,{variant:"body1"}," ",l," ")),n.a.createElement(k.a,{container:!0,justify:"space-between"},n.a.createElement(S.a,{variant:"body1"}," Latent P&L: "),n.a.createElement(S.a,{variant:"body1",style:{color:c>0?"green":"red"}},c," ")),n.a.createElement(k.a,{container:!0,justify:"space-between"},n.a.createElement(S.a,{variant:"body1"}," Current balance: "),n.a.createElement(S.a,{variant:"body1"}," ",p," ")),n.a.createElement(k.a,{container:!0,justify:"space-between"},n.a.createElement(S.a,{variant:"body1"}," Return to date: "),n.a.createElement(S.a,{variant:"body1",style:{color:m>0?"green":"red"}}," ",m>0&&"+",(100*m).toFixed(2),"% ")),n.a.createElement(k.a,{container:!0,justify:"space-between"},n.a.createElement(S.a,{variant:"body1"}," Days: "),n.a.createElement(S.a,{variant:"body1"}," ",d," ")),n.a.createElement(k.a,{container:!0,justify:"space-between"},n.a.createElement(S.a,{variant:"body1"}," Annualized return: "),n.a.createElement(S.a,{variant:"body1",style:{color:u>0?"green":"red"}}," ",(100*u).toFixed(2),"%")))),n.a.createElement(k.a,{item:!0,container:!0,xs:12,sm:6},n.a.createElement(N.a,{style:{padding:5,flexGrow:1,minHeight:300},ref:this.graphRef},n.a.createElement(I.a,null,n.a.createElement(L.a,{disableUnderline:!0,open:this.state.graph_dd,onClose:function(){e.toggle_graph_dd()},onOpen:function(){e.toggle_graph_dd()},value:this.state.graph_type,onChange:function(t){e.handle_graph_change(t)}},n.a.createElement(T.a,{value:"cash"},n.a.createElement(S.a,{variant:"h6"},"Cash")),n.a.createElement(T.a,{value:"investments"},n.a.createElement(S.a,{variant:"h6"},"Investments")),n.a.createElement(T.a,{value:"cash_investments"},n.a.createElement(S.a,{variant:"h6"},"Cash/Investments")),n.a.createElement(T.a,{value:"performance_pct"},n.a.createElement(S.a,{variant:"h6"},"Performance %")),n.a.createElement(T.a,{value:"performance_curr"},n.a.createElement(S.a,{variant:"h6"},"Performance $")))),n.a.createElement(J,{data:this.area_chart_data(),height:this.state.g_height,width:this.state.g_width,graph_type:this.state.graph_type}))),n.a.createElement(Q,Object.assign({},this.props,{portfolio:this.props.portfolio_type?this.props.p_real:this.props.p_demo,retrieve_history_details:function(t){e.retrieve_history_details(t)}})),n.a.createElement(te,Object.assign({},this.props,{portfolio:this.props.portfolio_type?this.props.p_real:this.props.p_demo})),n.a.createElement(re,Object.assign({},this.props,{portfolio:this.props.portfolio_type?this.props.p_real:this.props.p_demo}))))}}]),a}(n.a.Component),oe=Object(j.a)({},{withTheme:!0})(ne),ie=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).retrieve_portfolio=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M("api/retrieve_portfolio/").then((function(e){if(200===e.status){var t=JSON.parse(e.response);console.log(t),r.setState({demo_portfolio:t.p_demo.portfolio,current_demo_positions:t.p_demo.current_positions,real_portfolio:t.p_real.portfolio,current_real_positions:t.p_real.current_positions})}}));case 1:case"end":return e.stop()}}),e)}))),r.state={demo_portfolio:"",current_demo_positions:[],real_portfolio:"",current_real_positions:[]},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.retrieve_portfolio()}},{key:"render",value:function(){var e=this.props.portfolio_type?this.state.current_real_positions:this.state.current_demo_positions;return n.a.createElement(D.a,null,n.a.createElement(k.a,{container:!0,direction:"column",alignItems:"center",justify:"center"},n.a.createElement(A.a,{component:N.a},n.a.createElement(K.a,{"aria-label":"simple table"},n.a.createElement(Z.a,null,n.a.createElement(V.a,null,n.a.createElement(B.a,null,"Symbol"),n.a.createElement(B.a,null,"Name"),n.a.createElement(B.a,{align:"right"},"Open date"),n.a.createElement(B.a,{align:"right"},"Total investment "),n.a.createElement(B.a,{align:"right"},"# of shares"),n.a.createElement(B.a,{align:"right"},"Unrealized gain/loss $ "),n.a.createElement(B.a,{align:"right"},"Unrealized gain/loss % "))),n.a.createElement(X.a,null,e.map((function(e){return n.a.createElement(V.a,{key:e.id},n.a.createElement(B.a,{component:"th",scope:"row"},null!==e.stock?e.stock.symbol:"Unknown"," "),n.a.createElement(B.a,{component:"th",scope:"row"},null!==e.stock?e.stock.name:"Unknown"," "),n.a.createElement(B.a,{align:"right"},null===e.open_date?"N.A.":new Date(e.open_date).toLocaleString({timeZoneName:"short"})),n.a.createElement(B.a,{align:"right"},e.total_investment.toLocaleString(void 0,{maximumFractionDigits:0})),n.a.createElement(B.a,{align:"right"},e.num_of_shares),n.a.createElement(B.a,{align:"right",style:{color:e.current_rate-e.open_rate>0?"green":"red"}}," ",Math.round(e.current_rate*e.num_of_shares-e.open_rate*e.num_of_shares)," "),n.a.createElement(B.a,{align:"right",style:{color:e.current_rate-e.open_rate>0?"green":"red"}}," ",(100*(e.current_rate/e.open_rate-1)).toFixed(2)+"%"," "))})))))))}}]),a}(n.a.Component),se=Object(j.a)({},{withTheme:!0})(ie),le=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).state={},r}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=(e.theme,e.min),a=e.max,r=e.data;return n.a.createElement(z.j,{height:this.props.height,width:this.props.width,data:r},n.a.createElement(z.m,{dataKey:"name",fill:"dark"===this.props.theme.palette.type?this.props.theme.palette.common.white:this.props.theme.palette.common.black}),n.a.createElement(z.n,{dataKey:"close",domain:[Math.round(.9*t),Math.round(1.1*a)],fill:"dark"===this.props.theme.palette.type?this.props.theme.palette.common.white:this.props.theme.palette.common.black}),n.a.createElement(z.l,null),n.a.createElement(z.e,null),n.a.createElement(z.i,{type:"monotone",dataKey:"close",stroke:"dark"===this.props.theme.palette.type?this.props.theme.palette.primary.light:this.props.theme.palette.primary.dark,strokeWidth:4}),n.a.createElement(z.i,{type:"monotone",dataKey:"high_sma - "+this.props.high_sma_val,stroke:"dark"===this.props.theme.palette.type?this.props.theme.palette.secondary.light:this.props.theme.palette.secondary.dark,strokeWidth:2}),n.a.createElement(z.i,{type:"monotone",dataKey:"low_sma - "+this.props.low_sma_val,stroke:"dark"===this.props.theme.palette.type?this.props.theme.palette.info.light:this.props.theme.palette.info.dark,strokeWidth:2}),null!==this.props.open_date&&n.a.createElement(z.k,{x:this.props.open_date.split("T")[0],stroke:"green",label:{value:"BOUGHT",fill:"green"}}),null!==this.props.close_date&&n.a.createElement(z.k,{x:this.props.close_date.split("T")[0],stroke:"red",label:{value:"SOLD",fill:"red"}}),n.a.createElement(z.h,null))}}]),a}(n.a.Component),ce=Object(j.a)({},{withTheme:!0})(le),pe=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).updateGraph=function(){null!==r.graphRef.current&&(r.state.g_height!==r.graphRef.current.clientHeight&&r.setState({g_height:r.graphRef.current.clientHeight}),r.state.g_width!==r.graphRef.current.clientWidth&&r.setState({g_width:r.graphRef.current.clientWidth}))},r.retrieve_order_details=function(e){M("api/buy_order_details/?id="+e).then((function(e){if(200===e.status){var t=JSON.parse(e.response);r.setState({order:t.buy_order,price_df:t.price_df})}}))},r.line_chart_data=function(){var e=[];if(void 0!==r.state.price_df)for(var t=0;t<r.state.price_df.date.length;t++){var a,n=r.state.price_df.close[t].toFixed(2),o=r.state.price_df.high_sma[t].toFixed(2),i=r.state.price_df.low_sma[t].toFixed(2),s=(a={name:r.state.price_df.date[t].split("T")[0],close:n},Object(p.a)(a,"high_sma - ".concat(void 0===r.state.order.sma_position?"None":r.state.order.sma_position.model.high_sma),o),Object(p.a)(a,"low_sma - ".concat(void 0===r.state.order.sma_position?"None":r.state.order.sma_position.model.low_sma),i),a);e.push(s)}return e},r.price_max=function(){var e=0;if(void 0!==r.state.price_df){var t=[r.state.price_df.close,r.state.price_df.high_sma,r.state.price_df.low_sma].flat();e=Math.max.apply(null,t)}return Math.round(e)},r.price_min=function(){var e=0;if(void 0!==r.state.price_df){var t=[r.state.price_df.close,r.state.price_df.high_sma,r.state.price_df.low_sma].flat();e=Math.min.apply(null,t)}return Math.round(e)},r.state={g_height:0,g_width:0,order:void 0,price_df:void 0},r.graphRef=n.a.createRef(),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateGraph);var e=this.props.location.search.split("=")[1];null!==e&&this.retrieve_order_details(e)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateGraph)}},{key:"componentDidUpdate",value:function(){0===this.state.g_height&&this.updateGraph()}},{key:"render",value:function(){return void 0===this.state.order?n.a.createElement(k.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}}," ",n.a.createElement(C.a,{color:"primary"})):n.a.createElement(D.a,null,n.a.createElement(k.a,{container:!0,direction:"column",spacing:1},n.a.createElement(k.a,{item:!0,container:!0,xs:12,sm:12,direction:"column",alignItems:"center",justify:"center"},n.a.createElement(S.a,{variant:"h4"},this.state.order.stock.symbol," | ",this.state.order.stock.name),n.a.createElement(S.a,{variant:"h6"})),n.a.createElement(k.a,{item:!0,container:!0,xs:12,sm:12,direction:"row",justify:"center",spacing:1},n.a.createElement(k.a,{item:!0,container:!0,xs:12,sm:4},n.a.createElement(N.a,{style:{flexGrow:1,padding:5}},n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"center"},n.a.createElement(S.a,{variant:"body1",style:{fontWeight:"bold"}},"Buy order")),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"price_date"),n.a.createElement(S.a,{variant:"body2"},this.state.order.sma_position.price_date)),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"created_at"),n.a.createElement(S.a,{variant:"body2"},null===this.state.order.created_at?"None":new Date(this.state.order.created_at).toLocaleString({formatMatcher:"basic"}))),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"submited_at"),n.a.createElement(S.a,{variant:"body2"},null===this.state.order.submited_at?"None":new Date(this.state.order.submited_at).toLocaleString({formatMatcher:"basic"}))),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"executed_at"),n.a.createElement(S.a,{variant:"body2"},null===this.state.order.executed_at?"None":new Date(this.state.order.executed_at).toLocaleString({formatMatcher:"basic"}))),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"canceled_at"),n.a.createElement(S.a,{variant:"body2"},null===this.state.order.canceled_at?"None":new Date(this.state.order.canceled_at).toLocaleString({formatMatcher:"basic"}))),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"terminated_at"),n.a.createElement(S.a,{variant:"body2"},null===this.state.order.terminated_at?"None":new Date(this.state.order.terminated_at).toLocaleString({formatMatcher:"basic"}))))),n.a.createElement(k.a,{item:!0,container:!0,xs:12,sm:4},n.a.createElement(N.a,{style:{flexGrow:1,padding:5}},n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"center"},n.a.createElement(S.a,{variant:"body1",style:{fontWeight:"bold"}},"Model")),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"price_date"),n.a.createElement(S.a,{variant:"body2"},void 0!==this.state.order.sma_position&&this.state.order.sma_position.price_date)),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"SMAs"),n.a.createElement(S.a,{variant:"body2"},void 0!==this.state.order.sma_position&&this.state.order.sma_position.model.low_sma," | ",void 0!==this.state.order.sma_position&&this.state.order.sma_position.model.high_sma)),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"low_sma value"),n.a.createElement(S.a,{variant:"body2"},void 0!==this.state.order.sma_position&&this.state.order.sma_position.low_sma.toFixed(2))),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"high_sma value"),n.a.createElement(S.a,{variant:"body2"},void 0!==this.state.order.sma_position&&this.state.order.sma_position.high_sma.toFixed(2))),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"cagr"),n.a.createElement(S.a,{variant:"body2"},void 0!==this.state.order.sma_position&&(100*this.state.order.sma_position.sma_backtest.model_cagr).toFixed(1),"%")),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"precision"),n.a.createElement(S.a,{variant:"body2"},void 0!==this.state.order.sma_position&&(100*this.state.order.sma_position.sma_backtest.precision).toFixed(1),"%")),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"score"),n.a.createElement(S.a,{variant:"body2"},void 0!==this.state.order.sma_position&&this.state.order.sma_position.sma_backtest.score.toFixed(2)))))),n.a.createElement(k.a,{item:!0,container:!0,xs:12,sm:12},n.a.createElement(N.a,{style:{flexGrow:1,height:"600px"},ref:this.graphRef},n.a.createElement(ce,{data:this.line_chart_data(),max:this.price_max(),min:this.price_min(),open_date:this.state.order.sma_position.price_date,close_date:null,high_sma_val:void 0===this.state.order.sma_position?null:this.state.order.sma_position.model.high_sma,low_sma_val:void 0===this.state.order.sma_position?null:this.state.order.sma_position.model.low_sma,height:this.state.g_height,width:this.state.g_width})))))}}]),a}(n.a.Component),me=Object(j.a)({},{withTheme:!0})(pe),de=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).updateGraph=function(){null!==r.graphRef.current&&(r.state.g_height!==r.graphRef.current.clientHeight&&r.setState({g_height:r.graphRef.current.clientHeight}),r.state.g_width!==r.graphRef.current.clientWidth&&r.setState({g_width:r.graphRef.current.clientWidth}))},r.retrieve_position_details=function(e){M("api/position_details/?id="+e).then((function(e){if(200===e.status){var t=JSON.parse(e.response);console.log(t),r.setState({position:t.position,price_df:t.price_df})}}))},r.line_chart_data=function(){var e=[];if(void 0!==r.state.price_df)for(var t=0;t<r.state.price_df.date.length;t++){var a,n=r.state.price_df.close[t].toFixed(2),o=r.state.price_df.high_sma[t].toFixed(2),i=r.state.price_df.low_sma[t].toFixed(2),s=(a={name:r.state.price_df.date[t].split("T")[0],close:n},Object(p.a)(a,"high_sma - ".concat(void 0===r.state.position.sma_position?"None":r.state.position.sma_position.model.high_sma),o),Object(p.a)(a,"low_sma - ".concat(void 0===r.state.position.sma_position?"None":r.state.position.sma_position.model.low_sma),i),a);e.push(s)}return e},r.price_max=function(){var e=0;if(void 0!==r.state.price_df){var t=[r.state.price_df.close,r.state.price_df.high_sma,r.state.price_df.low_sma].flat();e=Math.max.apply(null,t)}return Math.round(e)},r.price_min=function(){var e=0;if(void 0!==r.state.price_df){var t=[r.state.price_df.close,r.state.price_df.high_sma,r.state.price_df.low_sma].flat();e=Math.min.apply(null,t)}return Math.round(e)},r.state={g_height:0,g_width:0,position:void 0,price_df:void 0},r.graphRef=n.a.createRef(),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateGraph);var e=this.props.location.search.split("=")[1];null!==e&&this.retrieve_position_details(e)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateGraph)}},{key:"componentDidUpdate",value:function(){0===this.state.g_height&&this.updateGraph()}},{key:"render",value:function(){return void 0===this.state.position?n.a.createElement(k.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}}," ",n.a.createElement(C.a,{color:"primary"})):n.a.createElement(D.a,null,n.a.createElement(k.a,{container:!0,direction:"column",spacing:1},n.a.createElement(k.a,{item:!0,container:!0,xs:12,sm:12,direction:"column",alignItems:"center",justify:"center"},n.a.createElement(S.a,{variant:"h4"},this.state.position.stock.symbol," | ",this.state.position.stock.name),n.a.createElement(S.a,{variant:"h6"},null!==this.state.position.open_date&&new Date(this.state.position.open_date).toLocaleString({formatMatcher:"basic"})," - ",null!==this.state.position.close_date&&new Date(this.state.position.close_date).toLocaleString({timeZoneName:"short"}))),n.a.createElement(k.a,{item:!0,container:!0,xs:12,sm:12,direction:"row",justify:"center",spacing:1},n.a.createElement(k.a,{item:!0,container:!0,xs:12,sm:4},n.a.createElement(N.a,{style:{flexGrow:1,padding:5}},n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"center"},n.a.createElement(S.a,{variant:"body1",style:{fontWeight:"bold"}},"Buy order")),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"price_date"),n.a.createElement(S.a,{variant:"body2"},0!==this.state.position.buy_order.length&&this.state.position.buy_order[0].sma_position.price_date)),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"created_at"),n.a.createElement(S.a,{variant:"body2"},0!==this.state.position.buy_order.length&&new Date(this.state.position.buy_order[0].created_at).toLocaleString({formatMatcher:"basic"}))),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"submited_at"),n.a.createElement(S.a,{variant:"body2"},0!==this.state.position.buy_order.length&&new Date(this.state.position.buy_order[0].submited_at).toLocaleString({formatMatcher:"basic"}))),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"executed_at"),n.a.createElement(S.a,{variant:"body2"},0!==this.state.position.buy_order.length&&new Date(this.state.position.buy_order[0].executed_at).toLocaleString({formatMatcher:"basic"}))),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"order_rate"),n.a.createElement(S.a,{variant:"body2"},0!==this.state.position.buy_order.length&&this.state.position.buy_order[0].order_rate.toFixed(2))),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"num_of_shares"),n.a.createElement(S.a,{variant:"body2"},0!==this.state.position.buy_order.length&&this.state.position.buy_order[0].num_of_shares)),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"total_investment"),n.a.createElement(S.a,{variant:"body2"},0!==this.state.position.buy_order.length&&this.state.position.buy_order[0].total_investment.toFixed(2))),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"stop_loss"),n.a.createElement(S.a,{variant:"body2"},0!==this.state.position.buy_order.length&&this.state.position.buy_order[0].stop_loss.toFixed(2))),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"take_profit"),n.a.createElement(S.a,{variant:"body2"},0!==this.state.position.buy_order.length&&this.state.position.buy_order[0].take_profit.toFixed(2))))),n.a.createElement(k.a,{item:!0,container:!0,xs:12,sm:4},n.a.createElement(N.a,{style:{flexGrow:1,padding:5}},n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"center"},n.a.createElement(S.a,{variant:"body1",style:{fontWeight:"bold"}},"Model")),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"SMAs"),n.a.createElement(S.a,{variant:"body2"},void 0!==this.state.position.sma_position&&this.state.position.sma_position.model.low_sma," | ",void 0!==this.state.position.sma_position&&this.state.position.sma_position.model.high_sma)),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"cagr"),n.a.createElement(S.a,{variant:"body2"},void 0!==this.state.position.sma_position&&(100*this.state.position.sma_position.sma_backtest.model_cagr).toFixed(1),"%")),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"precision"),n.a.createElement(S.a,{variant:"body2"},void 0!==this.state.position.sma_position&&(100*this.state.position.sma_position.sma_backtest.precision).toFixed(1),"%")),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"score"),n.a.createElement(S.a,{variant:"body2"},void 0!==this.state.position.sma_position&&this.state.position.sma_position.sma_backtest.score.toFixed(2))))),n.a.createElement(k.a,{item:!0,container:!0,xs:12,sm:4},n.a.createElement(N.a,{style:{flexGrow:1,padding:5}},n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"center"},n.a.createElement(S.a,{variant:"body1",style:{fontWeight:"bold"}},"Sell order")),0!==this.state.position.sell_order.length&&n.a.createElement(n.a.Fragment,null,n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"price_date"),n.a.createElement(S.a,{variant:"body2"},null!==this.state.position.sell_order[0].sma_position&&this.state.position.sell_order[0].sma_position.price_date)),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"created_at"),n.a.createElement(S.a,{variant:"body2"},new Date(this.state.position.sell_order[0].created_at).toLocaleString({formatMatcher:"basic"}))),n.a.createElement(k.a,{item:!0,container:!0,direction:"row",alignItems:"center",justify:"space-between"},n.a.createElement(S.a,{variant:"body2"},"executed_at"),n.a.createElement(S.a,{variant:"body2"},null===this.state.position.sell_order[0].executed_at?"None":new Date(this.state.position.sell_order[0].executed_at).toLocaleString({formatMatcher:"basic"}))))))),n.a.createElement(k.a,{item:!0,container:!0,xs:12,sm:12},n.a.createElement(N.a,{style:{flexGrow:1,height:"600px"},ref:this.graphRef},n.a.createElement(ce,{data:this.line_chart_data(),max:this.price_max(),min:this.price_min(),open_date:this.state.position.open_date,close_date:this.state.position.close_date,high_sma_val:void 0===this.state.position.sma_position?null:this.state.position.sma_position.model.high_sma,low_sma_val:void 0===this.state.position.sma_position?null:this.state.position.sma_position.model.low_sma,height:this.state.g_height,width:this.state.g_width})))))}}]),a}(n.a.Component),ue=Object(j.a)({},{withTheme:!0})(de),he=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).retrieve_order=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("retrieve_order"),M("api/retrieve_order/").then((function(e){if(200===e.status){var t=JSON.parse(e.response);console.log(t),r.setState({orders_demo:t.p_demo.orders,orders_real:t.p_real.orders})}}));case 2:case"end":return e.stop()}}),e)}))),r.order_status=function(e){var t={};if(void 0!==e.order.order_rate)if(null===e.order.position){var a=null!==e.order.canceled_at,r=null!==e.order.terminated_at;(n=null!==e.order.submited_at)||(t={status:"PENDING",color:"orange"}),(o=n&&null!==e.order.executed_at)||(t={status:"PENDING",color:"orange"}),o&&(t={status:"EXECUTED",color:"green"}),a&&(t={status:"CANCELED",color:"orange"}),r&&(t={status:"CANCELED",color:"orange"})}else{var n,o;(o=(n=null!==e.order.submited_at)&&null!==e.order.executed_at)&&!a&&!r&&e.order.position.close_date;n||(t={status:"PENDING",color:"orange"}),o||(t={status:"PENDING",color:"orange"}),o&&(t={status:"EXECUTED",color:"green"}),null!==e.order.position.close_date&&(t={status:"EXECUTED",color:"green"})}else null===e.order.submited_at&&null===e.order.executed_at&&(t={status:"PENDING",color:"orange"}),null!==e.order.submited_at&&null===e.order.executed_at&&(t={status:"PENDING",color:"orange"}),null!==e.order.submited_at&&null!==e.order.executed_at&&(t={status:"EXECUTED",color:"green"});return t==={}&&(t={status:"ERROR",color:"red"}),t},r.state={orders_demo:[],orders_real:[]},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.retrieve_order()}},{key:"render",value:function(){var e=this,t=this.props.portfolio_type?this.state.orders_real:this.state.orders_demo;return n.a.createElement(k.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center"},n.a.createElement(k.a,{item:!0,xs:12,sm:10},n.a.createElement(A.a,{component:N.a,style:{height:"calc(100vh - 100px)"}},n.a.createElement(K.a,{size:"small",stickyHeader:!0,"aria-label":"orders table"},n.a.createElement(Z.a,null,n.a.createElement(V.a,null,n.a.createElement(B.a,{align:"right"},"Order type"),n.a.createElement(B.a,null,"Symbol"),n.a.createElement($.a,{smDown:!0},n.a.createElement(B.a,null,"Name")),n.a.createElement(B.a,{align:"right"},"Total investment "),n.a.createElement($.a,{smDown:!0},n.a.createElement(B.a,{align:"right"},"# of shares"),n.a.createElement(B.a,{align:"right"},"created_at"),n.a.createElement(B.a,{align:"right"},"submited_at"),n.a.createElement(B.a,{align:"right"},"executed_at"),n.a.createElement(B.a,{align:"right"},"canceled_at"),n.a.createElement(B.a,{align:"right"},"terminated_at")),n.a.createElement(B.a,{align:"right"},"Status"))),n.a.createElement(X.a,null,t.map((function(a,r){var o=e.order_status(a);return 0===r||new Date(a.order.created_at).getDay()!==new Date(t[r-1].order.created_at).getDay()?n.a.createElement(n.a.Fragment,{key:a.order.id},n.a.createElement(V.a,null,n.a.createElement(B.a,{component:"th",scope:"row",align:"center",colSpan:11,style:{fontWeight:"bold"}},a.order.created_at.split("T")[0]," ")),n.a.createElement(V.a,{hover:!0,key:a.order.id,onClick:function(){null!==a.position&&e.props.history.push("/position/?id="+a.position.id)}},n.a.createElement(B.a,{component:"th",scope:"row",style:{color:void 0===a.order.order_rate?"red":"green"}},void 0===a.order.order_rate?"SELL":"BUY"," "),n.a.createElement(B.a,{component:"th",scope:"row"},a.order.stock.symbol," "),n.a.createElement($.a,{smDown:!0},n.a.createElement(B.a,{component:"th",scope:"row",style:{display:"block",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}},a.order.stock.name," ")),n.a.createElement(B.a,{align:"right"},void 0===a.order.order_rate?a.position.total_investment.toFixed(1):a.order.total_investment.toFixed(1)," "),n.a.createElement($.a,{smDown:!0},n.a.createElement(B.a,{align:"right"},void 0===a.order.order_rate?a.position.num_of_shares:a.order.num_of_shares," "),n.a.createElement(B.a,{align:"right"},null===a.order.created_at?"-":new Date(a.order.created_at).toLocaleTimeString()," "),n.a.createElement(B.a,{align:"right"},null===a.order.submited_at?"-":new Date(a.order.submited_at).toLocaleTimeString()," "),n.a.createElement(B.a,{align:"right"},null===a.order.executed_at?"-":new Date(a.order.executed_at).toLocaleTimeString()," "),n.a.createElement(B.a,{align:"right"},null===a.order.canceled_at||void 0===a.order.canceled_at?"-":new Date(a.order.canceled_at).toLocaleTimeString()," "),n.a.createElement(B.a,{align:"right"},null===a.order.terminated_at||void 0===a.order.terminated_at?"-":new Date(a.order.terminated_at).toLocaleTimeString()," ")),n.a.createElement(B.a,{align:"right",style:{color:o.color}}," ",o.status," "))):n.a.createElement(V.a,{hover:!0,key:a.order.id,onClick:function(){null!==a.position&&e.props.history.push("/position/?id="+a.position.id)}},n.a.createElement(B.a,{component:"th",scope:"row",style:{color:void 0===a.order.order_rate?"red":"green"}},void 0===a.order.order_rate?"SELL":"BUY"," "),n.a.createElement(B.a,{component:"th",scope:"row"},a.order.stock.symbol," "),n.a.createElement($.a,{smDown:!0},n.a.createElement(B.a,{component:"th",scope:"row",style:{display:"block",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}},a.order.stock.name," ")),n.a.createElement(B.a,{align:"right"},void 0===a.order.order_rate?a.position.total_investment.toFixed(1):a.order.total_investment.toFixed(1)," "),n.a.createElement($.a,{smDown:!0},n.a.createElement(B.a,{align:"right"},void 0===a.order.order_rate?a.position.num_of_shares:a.order.num_of_shares," "),n.a.createElement(B.a,{align:"right"},null===a.order.created_at?"-":new Date(a.order.created_at).toLocaleTimeString()," "),n.a.createElement(B.a,{align:"right"},null===a.order.submited_at?"-":new Date(a.order.submited_at).toLocaleTimeString()," "),n.a.createElement(B.a,{align:"right"},null===a.order.executed_at?"-":new Date(a.order.executed_at).toLocaleTimeString()," "),n.a.createElement(B.a,{align:"right"},null===a.order.canceled_at||void 0===a.order.canceled_at?"-":new Date(a.order.canceled_at).toLocaleTimeString()," "),n.a.createElement(B.a,{align:"right"},null===a.order.terminated_at||void 0===a.order.terminated_at?"-":new Date(a.order.terminated_at).toLocaleTimeString()," ")),n.a.createElement(B.a,{align:"right",style:{color:o.color}}," ",o.status," "))})))))))}}]),a}(n.a.Component),_e=Object(j.a)({},{withTheme:!0})(he),ge=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).retrieve_market=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M("api/retrieve_market/").then((function(e){if(console.log(e),200===e.status){var t=JSON.parse(e.response);console.log(t),r.setState({stocks:t.stocks})}}));case 1:case"end":return e.stop()}}),e)}))),r.renderStocks=function(){return r.state.stocks.map((function(e){return n.a.createElement(V.a,{key:e.symbol},n.a.createElement(B.a,{component:"th",scope:"row"}," ",e.symbol,"  "),n.a.createElement(B.a,{component:"th",scope:"row"},e.name),n.a.createElement(B.a,{component:"th",scope:"row"},e.sector," "),n.a.createElement(B.a,{component:"th",scope:"row"},e.industry," "),n.a.createElement(B.a,{component:"th",scope:"row",align:"right"},null===e.last_price?"None":e.last_price.price_date," "),n.a.createElement(B.a,{component:"th",scope:"row",align:"right"},null===e.last_price?"None":Math.round(e.last_price.close)," "),n.a.createElement(B.a,{component:"th",scope:"row",align:"right"}," ",r.props.portfolio_type?null===e.last_real_pred.prediction?"None":e.last_real_pred.prediction.toFixed(3):null===e.last_demo_pred.prediction?"None":e.last_demo_pred.prediction.toFixed(3)," "))}))},r.name_sorter=function(e,t){"asc"===t?r.state.stocks.sort((function(t,a){return t.stock[e].localeCompare(a.stock[e])})):r.state.stocks.sort((function(t,a){return a.stock[e].localeCompare(t.stock[e])}))},r.number_sorter=function(e,t){"prediction"===e?r.props.portfolio_type?"asc"===t?r.state.stocks.sort((function(e,t){return e.last_real_pred.prediction<t.last_real_pred.prediction?1:-1})):r.state.stocks.sort((function(e,t){return e.last_real_pred.prediction>t.last_real_pred.prediction?1:-1})):"asc"===t?r.state.stocks.sort((function(e,t){return e.last_demo_pred.prediction<t.last_demo_pred.prediction?1:-1})):r.state.stocks.sort((function(e,t){return e.last_demo_pred.prediction>t.last_demo_pred.prediction?1:-1})):"asc"===t?r.state.stocks.sort((function(t,a){return t[e]<a[e]?1:-1})):r.state.stocks.sort((function(t,a){return t[e]>a[e]?1:-1}))},r.p_l_sorter=function(e,t){"asc"===t?r.state.stocks.sort((function(e,t){return(e.current_rate-e.open_rate)*e.num_of_shares<(t.current_rate-t.open_rate)*t.num_of_shares?1:-1})):r.state.stocks.sort((function(e,t){return(e.current_rate-e.open_rate)*e.num_of_shares>(t.current_rate-t.open_rate)*t.num_of_shares?1:-1}))},r.sorter=function(e,t){switch(e){case"symbol":case"name":case"sector":r.name_sorter(e,t);break;case"industry":case"price_date":case"close_price":case"prediction":r.number_sorter(e,t);break;default:console.log("Unknown col")}},r.handleSorting=function(e){"asc"===r.state.sorting_dir?(r.sorter(e.currentTarget.id,"desc"),r.setState({sorting_col:e.currentTarget.id,sorting_dir:"desc"})):(r.sorter(e.currentTarget.id,"asc"),r.setState({sorting_col:e.currentTarget.id,sorting_dir:"asc"}))},r.state={stocks:[],predictions:[],sorting_col:"symbol",sorting_dir:"desc"},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props),this.retrieve_market()}},{key:"render",value:function(){var e=this;return n.a.createElement(D.a,null,n.a.createElement(k.a,{container:!0,direction:"row",alignItems:"center",justify:"center"},n.a.createElement(S.a,{variant:"h6",style:{margin:10}},"Investment universe: ",this.state.stocks.length," stocks"),n.a.createElement(A.a,{component:N.a},n.a.createElement(K.a,{"aria-label":"simple table",style:{tableLayout:"fixed",width:"100%"}},n.a.createElement(Z.a,null,n.a.createElement(V.a,null,n.a.createElement(B.a,null," ",n.a.createElement(S.a,{variant:"body2"},"Symbol"),n.a.createElement(q.a,{active:"symbol"===this.state.sorting_col,direction:this.state.sorting_dir,id:"symbol",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,null," ",n.a.createElement(S.a,{variant:"body2"},"Name"),n.a.createElement(q.a,{active:"name"===this.state.sorting_col,direction:this.state.sorting_dir,id:"name",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,null,n.a.createElement(S.a,{variant:"body2"},"Sector"),n.a.createElement(q.a,{active:"sector"===this.state.sorting_col,direction:this.state.sorting_dir,id:"sector",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,null,n.a.createElement(S.a,{variant:"body2"},"Industry"),n.a.createElement(q.a,{active:"industry"===this.state.sorting_col,direction:this.state.sorting_dir,id:"industry",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,{align:"right"},n.a.createElement(S.a,{variant:"body2"},"Price date"),n.a.createElement(q.a,{active:"price_date"===this.state.sorting_col,direction:this.state.sorting_dir,id:"price_date",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,{align:"right"},n.a.createElement(S.a,{variant:"body2"},"Closing price"),n.a.createElement(q.a,{active:"close_price"===this.state.sorting_col,direction:this.state.sorting_dir,id:"close_price",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,{align:"right"},n.a.createElement(S.a,{variant:"body2"},this.props.portfolio_type?this.props.p_real.portfolio.neural_network.nn_name:this.props.p_demo.portfolio.neural_network.nn_name," prediction"),n.a.createElement(q.a,{active:"prediction"===this.state.sorting_col,direction:this.state.sorting_dir,id:"prediction",onClick:function(t){e.handleSorting(t)}})))),n.a.createElement(X.a,null,this.renderStocks())))))}}]),a}(n.a.Component),fe=Object(j.a)({},{withTheme:!0})(ge),Ee=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).retrieve_model=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M("api/retrieve_model/").then((function(e){if(200===e.status){var t=JSON.parse(e.response);console.log(t),r.setState({sma_backtests:t.sma_backtest})}}));case 1:case"end":return e.stop()}}),e)}))),r.render_Sma_backtests=function(){return r.state.sma_backtests.map((function(e){return n.a.createElement(V.a,{key:e.id},n.a.createElement(B.a,{component:"th",scope:"row"},e.stock.symbol," "),n.a.createElement(B.a,{align:"right"},e.model.high_sma," / ",e.model.low_sma," "),n.a.createElement(B.a,{align:"right"},parseFloat(100*e.model_cagr).toFixed(2)+"%"),n.a.createElement(B.a,{align:"right"},parseFloat(100*e.precision).toFixed(2)+"%"),n.a.createElement(B.a,{align:"right"},Math.round(e.score)),void 0===e.sma_position?n.a.createElement(n.a.Fragment,null,n.a.createElement(B.a,{align:"right",style:{color:"red"}},"None"),n.a.createElement(B.a,{align:"right",style:{color:"red"}},"None")):n.a.createElement(n.a.Fragment,null,n.a.createElement(B.a,{align:"right"},0===e.sma_position.length?"None":e.sma_position[0].price_date),n.a.createElement(B.a,{align:"right",style:{color:0===e.sma_position.length?"black":e.sma_position[0].buy?"green":"red"}},0===e.sma_position.length?"None":e.sma_position[0].buy?"BUY":"SELL")))}))},r.sorter=function(e,t){"asc"===t?r.state.sma_backtests.sort((function(t,a){return t[e]>a[e]?1:-1})):r.state.sma_backtests.sort((function(t,a){return a[e]>t[e]?1:-1}))},r.handleSorting=function(e){"asc"===r.state.sorting_dir?(r.sorter(e.currentTarget.id,"desc"),r.setState({sorting_col:e.currentTarget.id,sorting_dir:"desc"})):(r.sorter(e.currentTarget.id,"asc"),r.setState({sorting_col:e.currentTarget.id,sorting_dir:"asc"}))},r.update_sma_positions=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M("api/update_sma_positions/").then((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)}))),r.state={sma_backtests:[],sorting_col:"symbol",sorting_dir:"desc"},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.retrieve_model()}},{key:"render",value:function(){var e=this;return n.a.createElement(D.a,null,n.a.createElement(k.a,{container:!0,direction:"row",alignItems:"center",justify:"center"},n.a.createElement(S.a,{variant:"h4",style:{margin:5}},"Models"),n.a.createElement(A.a,{component:N.a},n.a.createElement(K.a,{"aria-label":"simple table"},n.a.createElement(Z.a,null,n.a.createElement(V.a,null,n.a.createElement(B.a,{style:{fontWeight:"bold"}},"Symbol",n.a.createElement(q.a,{active:"symbol"===this.state.sorting_col,direction:this.state.sorting_dir,id:"symbol",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,{align:"right",style:{fontWeight:"bold"}},"Model",n.a.createElement(q.a,{active:"model"===this.state.sorting_col,direction:this.state.sorting_dir,id:"model",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,{align:"right",style:{fontWeight:"bold"}},"CAGR",n.a.createElement(q.a,{active:"model_cagr"===this.state.sorting_col,direction:this.state.sorting_dir,id:"model_cagr",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,{align:"right",style:{fontWeight:"bold"}},"Precision",n.a.createElement(q.a,{active:"precision"===this.state.sorting_col,direction:this.state.sorting_dir,id:"precision",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,{align:"right",style:{fontWeight:"bold"}},"Score",n.a.createElement(q.a,{active:"score"===this.state.sorting_col,direction:this.state.sorting_dir,id:"score",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,{align:"right",style:{fontWeight:"bold"}},"Position date",n.a.createElement(q.a,{active:"sma_position_date"===this.state.sorting_col,direction:this.state.sorting_dir,id:"sma_position_date",onClick:function(t){e.handleSorting(t)}})),n.a.createElement(B.a,{align:"right",style:{fontWeight:"bold"}},"SMA Position",n.a.createElement(q.a,{active:"sma_position"===this.state.sorting_col,direction:this.state.sorting_dir,id:"sma_position",onClick:function(t){e.handleSorting(t)}})))),n.a.createElement(X.a,null,this.render_Sma_backtests())))))}}]),a}(n.a.Component),ye=a(216),ve=a.n(ye),be=a(215),we=a.n(be),ke=a(492),Se=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).retrieve_history=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("retrieve_history"),M("api/retrieve_history/").then((function(e){if(200===e.status){var t=JSON.parse(e.response);console.log(t),r.setState({history_demo:t.p_demo.history,history_real:t.p_real.history})}}));case 2:case"end":return e.stop()}}),e)}))),r.retrieve_history_details=function(){var e=Object(c.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("retrieve_history_details"),M("api/retrieve_history_details/?id="+t).then((function(e){if(200===e.status){var t=JSON.parse(e.response);console.log(t)}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.holding_duration=function(e,t){var a=Math.abs(new Date(e)-new Date(t))/1e3,r=Math.floor(a/86400);a-=86400*r;var n=Math.floor(a/3600)%24;return a-=3600*n,r<1?"".concat((n/24).toLocaleString(void 0,{maximumFractionDigits:2})," day"):"".concat(r,",").concat((n/24).toLocaleString(void 0,{maximumFractionDigits:0})," day(s)")},r.handle_open=function(){var e=Object(c.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t===r.state.open_id?r.setState({open_id:null}):(r.setState({open_id:t}),r.retrieve_history_details(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.state={open_id:null,history_demo:[],history_real:[]},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.retrieve_history()}},{key:"renderHistory",value:function(){var e=this;if(this.props.portfolio_type){var t=this.state.history_real;return n.a.createElement(A.a,{component:N.a,style:{overflow:"auto"}},n.a.createElement(K.a,{size:"small",stickyHeader:!0,"aria-label":"sticky table"},n.a.createElement(Z.a,null,n.a.createElement(V.a,null,n.a.createElement(B.a,null,"Name"),n.a.createElement(B.a,null,"Sector"),n.a.createElement(B.a,{align:"right"},"Open date"),n.a.createElement(B.a,{align:"right"},"Close date"),n.a.createElement(B.a,{align:"right"},"Duration"),n.a.createElement(B.a,{align:"right"},"Open rate"),n.a.createElement(B.a,{align:"right"},"Close rate"),n.a.createElement(B.a,{align:"right"},"P/L"))),n.a.createElement(X.a,null,t.map((function(t){return n.a.createElement(V.a,{key:t.id},n.a.createElement(B.a,null,n.a.createElement(ke.a,{"aria-label":"expand row",size:"small",onClick:function(){return e.handle_open(t.id)}},e.state.open_id===t.id?n.a.createElement(we.a,null):n.a.createElement(ve.a,null))),n.a.createElement(B.a,{component:"th",scope:"row"},t.stock.name," "),n.a.createElement(B.a,{component:"th",scope:"row"},t.stock.sector," "),n.a.createElement(B.a,{align:"right"}," ",new Date(t.open_date).toLocaleString({timeZoneName:"short"})," "),n.a.createElement(B.a,{align:"right"}," ",new Date(t.close_date).toLocaleString({timeZoneName:"short"})," "),n.a.createElement(B.a,{align:"right"}," ",e.holding_duration(t.open_date,t.close_date)," "),n.a.createElement(B.a,{align:"right"}," ",t.open_rate.toLocaleString(void 0,{maximumFractionDigits:2})," "),n.a.createElement(B.a,{align:"right"}," ",t.close_rate.toLocaleString(void 0,{maximumFractionDigits:2})," "),n.a.createElement(B.a,{align:"right",style:{color:t.close_rate>t.open_rate?"green":"red"}},(100*(t.close_rate/t.open_rate-1)).toFixed(2),"%"))})))))}var a=this.state.history_demo;return n.a.createElement(A.a,{component:N.a,style:{overflow:"auto"}},n.a.createElement(K.a,{size:"small",stickyHeader:!0,"aria-label":"sticky table"},n.a.createElement(Z.a,null,n.a.createElement(V.a,null,n.a.createElement(B.a,null,"Name "),n.a.createElement(B.a,null,"Sector "),n.a.createElement(B.a,{align:"right"},"created_at "),n.a.createElement(B.a,{align:"right"},"Open date "),n.a.createElement(B.a,{align:"right"},"Close date"),n.a.createElement(B.a,{align:"right"},"Duration"),n.a.createElement(B.a,{align:"right"},"Open rate "),n.a.createElement(B.a,{align:"right"},"Close rate"),n.a.createElement(B.a,{align:"right"},"P/L $"),n.a.createElement(B.a,{align:"right"},"P/L %"))),n.a.createElement(X.a,null,a.map((function(t){return n.a.createElement(V.a,{hover:!0,key:t.id,onClick:function(){e.props.history.push("/position/?id="+t.id)}},n.a.createElement(B.a,{component:"th",scope:"row"},t.stock.name," "),n.a.createElement(B.a,{component:"th",scope:"row"},t.stock.sector," "),n.a.createElement(B.a,{align:"right"}," ",new Date(t.created_at).toLocaleString({timeZoneName:"short"})," "),n.a.createElement(B.a,{align:"right"}," ",new Date(t.open_date).toLocaleString({timeZoneName:"short"})," "),n.a.createElement(B.a,{align:"right"}," ",new Date(t.close_date).toLocaleString({timeZoneName:"short"})," "),n.a.createElement(B.a,{align:"right"}," ",e.holding_duration(t.open_date,t.close_date)," "),n.a.createElement(B.a,{align:"right"}," ",t.open_rate.toLocaleString(void 0,{maximumFractionDigits:2})," "),n.a.createElement(B.a,{align:"right"}," ",t.close_rate.toLocaleString(void 0,{maximumFractionDigits:2})," "),n.a.createElement(B.a,{align:"right",style:{color:t.close_rate>t.open_rate?"green":"red"}},((t.close_rate-t.open_rate)*t.num_of_shares).toFixed(1)),n.a.createElement(B.a,{align:"right",style:{color:t.close_rate>t.open_rate?"green":"red"}},(100*(t.close_rate/t.open_rate-1)).toFixed(2),"%"))})))))}},{key:"render",value:function(){var e=this,t=this.props.portfolio_type?this.state.history_real:this.state.history_demo;return n.a.createElement(k.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center"},n.a.createElement(k.a,{item:!0,xs:12,sm:10},n.a.createElement(A.a,{component:N.a,style:{overflow:"auto"}},n.a.createElement(K.a,{size:"small",stickyHeader:!0,"aria-label":"sticky table"},n.a.createElement(Z.a,null,n.a.createElement(V.a,null,n.a.createElement(B.a,null,"Ticker "),n.a.createElement(B.a,null,"Name "),n.a.createElement(B.a,null,"Sector "),n.a.createElement(B.a,{align:"right"},"created_at "),n.a.createElement(B.a,{align:"right"},"Open date "),n.a.createElement(B.a,{align:"right"},"Close date"),n.a.createElement(B.a,{align:"right"},"Duration"),n.a.createElement(B.a,{align:"right"},"Total investment"),n.a.createElement(B.a,{align:"right"},"Open rate "),n.a.createElement(B.a,{align:"right"},"Close rate"),n.a.createElement(B.a,{align:"right"},"P/L $"),n.a.createElement(B.a,{align:"right"},"P/L %"))),n.a.createElement(X.a,null,t.map((function(t){return n.a.createElement(V.a,{hover:!0,key:t.id,onClick:function(){e.props.history.push("/position/?id="+t.id)}},n.a.createElement(B.a,{component:"th",scope:"row"},t.stock.symbol," "),n.a.createElement(B.a,{component:"th",scope:"row"},t.stock.name," "),n.a.createElement(B.a,{component:"th",scope:"row"},t.stock.sector," "),n.a.createElement(B.a,{align:"right"}," ",new Date(t.created_at).toLocaleString({timeZoneName:"short"})," "),n.a.createElement(B.a,{align:"right"}," ",new Date(t.open_date).toLocaleString({timeZoneName:"short"})," "),n.a.createElement(B.a,{align:"right"}," ",new Date(t.close_date).toLocaleString({timeZoneName:"short"})," "),n.a.createElement(B.a,{align:"right"}," ",e.holding_duration(t.open_date,t.close_date)," "),n.a.createElement(B.a,{align:"right"}," ",t.total_investment.toFixed(1)," "),n.a.createElement(B.a,{align:"right"}," ",t.open_rate.toLocaleString(void 0,{maximumFractionDigits:2})," "),n.a.createElement(B.a,{align:"right"}," ",t.close_rate.toLocaleString(void 0,{maximumFractionDigits:2})," "),n.a.createElement(B.a,{align:"right",style:{color:t.close_rate>t.open_rate?"green":"red"}},((t.close_rate-t.open_rate)*t.num_of_shares).toFixed(1)),n.a.createElement(B.a,{align:"right",style:{color:t.close_rate>t.open_rate?"green":"red"}},(100*(t.close_rate/t.open_rate-1)).toFixed(2),"%"))})))))))}}]),a}(n.a.Component),je=Object(j.a)({},{withTheme:!0})(Se),Oe=a(508),xe=a(493),Ce=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).handleChange=function(e){r.setState(Object(p.a)({},e.target.name,e.target.value))},r.state={sign_up:!1},r}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement(k.a,{container:!0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},n.a.createElement(k.a,{item:!0,xs:10,style:{margin:10}},n.a.createElement(S.a,{style:{color:"red"}},this.props.errors.non_field_errors)),n.a.createElement(k.a,{item:!0,xs:10,style:{margin:10}},n.a.createElement(Oe.a,{onChange:function(t){e.handleChange(t)},name:"username",variant:"outlined",fullWidth:!0,required:!0,id:"Name",label:"Name",autoFocus:!0,error:void 0!==this.props.errors.username,helperText:this.props.errors.username})),this.state.sign_up&&n.a.createElement(k.a,{item:!0,xs:10,style:{margin:10}},n.a.createElement(Oe.a,{onChange:function(t){e.handleChange(t)},name:"email",variant:"outlined",fullWidth:!0,required:!0,id:"email",label:"Email",error:void 0!==this.props.errors.email,helperText:this.props.errors.email})),n.a.createElement(k.a,{item:!0,xs:10,style:{margin:10}},n.a.createElement(Oe.a,{onChange:function(t){e.handleChange(t)},variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",error:void 0!==this.props.errors.password,helperText:this.props.errors.password})),n.a.createElement(k.a,{item:!0,xs:10,style:{margin:10}},this.state.sign_up&&n.a.createElement(xe.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){e.props.sign_up(e.state)}},"Sign up"),!this.state.sign_up&&n.a.createElement(xe.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){e.props.log_in(e.state)}},"Log in")),n.a.createElement(k.a,{item:!0,xs:10,style:{margin:10}},n.a.createElement(S.a,{color:"inherit",style:{cursor:"pointer"},onClick:function(){e.setState({sign_up:!e.state.sign_up})}},!this.state.sign_up&&"Sign up",this.state.sign_up&&"Log in")))}}]),a}(n.a.Component),De=a(513),Ne=a(494),Ie=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).handleChange=function(e){r.setState(Object(p.a)({},e.target.name,e.target.value))},r.state={},r}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement(k.a,{container:!0,direction:"column",alignItems:"center"},n.a.createElement(k.a,{container:!0,item:!0,xs:10,sm:4,md:4,lg:4,xl:4,style:{margin:10}},n.a.createElement(Oe.a,{onChange:function(t){e.handleChange(t)},defaultValue:this.props.user.username,name:"username",variant:"outlined",fullWidth:!0,required:!0,id:"Name",label:"Name",error:void 0!==this.props.errors.username,helperText:this.props.errors.username})),n.a.createElement(k.a,{container:!0,item:!0,xs:10,sm:4,md:4,lg:4,xl:4,style:{margin:10}},n.a.createElement(Oe.a,{onChange:function(t){e.handleChange(t)},defaultValue:this.props.user.email,name:"email",variant:"outlined",fullWidth:!0,required:!0,id:"Email",label:"Email",error:void 0!==this.props.errors.email,helperText:this.props.errors.email})),n.a.createElement(k.a,{container:!0,item:!0,xs:10,sm:4,md:4,lg:4,xl:4,style:{margin:10}},n.a.createElement(Oe.a,{onChange:function(t){e.handleChange(t)},defaultValue:"",variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",error:void 0!==this.props.errors.password,helperText:this.props.errors.password})),n.a.createElement(k.a,{container:!0,item:!0,xs:10,sm:4,md:4,lg:4,xl:4,style:{margin:10}},n.a.createElement(Oe.a,{onChange:function(t){e.handleChange(t)},defaultValue:this.props.user.broker_username,variant:"outlined",required:!0,fullWidth:!0,name:"broker_username",label:"Broker username",type:"broker_username",id:"broker_username",error:void 0!==this.props.errors.broker_username,helperText:this.props.errors.broker_username})),n.a.createElement(k.a,{container:!0,item:!0,xs:10,sm:4,md:4,lg:4,xl:4,style:{margin:10}},n.a.createElement(Oe.a,{onChange:function(t){e.handleChange(t)},defaultValue:this.props.user.broker_password,variant:"outlined",required:!0,fullWidth:!0,name:"broker_password",label:"Broker password",type:"password",id:"broker_password",error:void 0!==this.props.errors.broker_password,helperText:this.props.errors.broker_password})),null!==this.props.p_demo.portfolio.created_at&&n.a.createElement(k.a,{container:!0,item:!0,direction:"column",align:"center",justify:"center",xs:10,sm:4,md:4,lg:4,xl:4,style:{margin:10}},n.a.createElement(S.a,{variant:"body1"},"Demo account"),n.a.createElement(k.a,{container:!0,alignItems:"center",justify:"space-between",item:!0,style:{marginVertical:5}},n.a.createElement(S.a,{variant:"body1"},this.props.p_demo.portfolio.active?"Active":"Inactive"),n.a.createElement(De.a,{name:"demo_active",checked:!0===this.props.p_demo.portfolio.active,onChange:function(){e.props.update_portfolio({active:!0===e.props.p_demo.portfolio.active?"False":"True",portfolio_type:"False"})}})),n.a.createElement(k.a,{container:!0,alignItems:"center",justify:"space-between",item:!0,style:{marginVertical:5}},n.a.createElement(S.a,{variant:"body1"},"Neural network"),n.a.createElement(S.a,{variant:"body1"},this.props.p_demo.portfolio.neural_network.nn_name)),n.a.createElement(k.a,{container:!0,alignItems:"center",justify:"space-between",item:!0,style:{marginVertical:5}},n.a.createElement(S.a,{variant:"body1"},"Stop loss"),n.a.createElement(L.a,{labelId:"stop_loss_select_demo",id:"stop_loss_select_demo",value:null===this.props.p_demo.portfolio.stop_loss?"None":this.props.p_demo.portfolio.stop_loss,onChange:function(t){e.props.update_portfolio({stop_loss:"None"===t.target.value?null:t.target.value,portfolio_type:"False"})}},n.a.createElement(T.a,{value:"None"},"None"),n.a.createElement(T.a,{value:.01},"1%"),n.a.createElement(T.a,{value:.025},"2,5%"),n.a.createElement(T.a,{value:.05},"5%"),n.a.createElement(T.a,{value:.1},"10%"),n.a.createElement(T.a,{value:.15},"15%"),n.a.createElement(T.a,{value:.2},"20%"))),n.a.createElement(k.a,{container:!0,alignItems:"center",justify:"space-between",item:!0,style:{marginVertical:5}},n.a.createElement(S.a,{variant:"body1"},"Take profit"),n.a.createElement(L.a,{labelId:"take_profit_select_demo",id:"take_profit_select_demo",value:null===this.props.p_demo.portfolio.take_profit?"None":this.props.p_demo.portfolio.take_profit,onChange:function(t){e.props.update_portfolio({take_profit:"None"===t.target.value?null:t.target.value,portfolio_type:"False"})}},n.a.createElement(T.a,{value:"None"},"None"),n.a.createElement(T.a,{value:.1},"10%"),n.a.createElement(T.a,{value:.15},"15%"),n.a.createElement(T.a,{value:.2},"20%"),n.a.createElement(T.a,{value:.3},"30%"),n.a.createElement(T.a,{value:.4},"40%"),n.a.createElement(T.a,{value:.5},"50%"),n.a.createElement(T.a,{value:1},"100%"))),n.a.createElement(k.a,{container:!0,alignItems:"center",justify:"space-between",item:!0,style:{marginVertical:5}},n.a.createElement(S.a,{variant:"body1"},"Position size (% of total asset)"),n.a.createElement(L.a,{labelId:"pos_size_select_demo",id:"pos_size_select_demo",value:null===this.props.p_demo.portfolio.pos_size?"None":this.props.p_demo.portfolio.pos_size,onChange:function(t){e.props.update_portfolio({pos_size:t.target.value,portfolio_type:"False"})}},n.a.createElement(T.a,{value:.01},"1%"),n.a.createElement(T.a,{value:.05},"5%"),n.a.createElement(T.a,{value:.1},"10%"),n.a.createElement(T.a,{value:.15},"15%"),n.a.createElement(T.a,{value:.2},"20%"),n.a.createElement(T.a,{value:.3},"30%")))),n.a.createElement(k.a,{container:!0,item:!0,direction:"column",align:"center",justify:"center",xs:10,sm:4,md:4,lg:4,xl:4,style:{margin:10}},n.a.createElement(Ne.a,{style:{margin:10}})),null!==this.props.p_real.portfolio.created_at&&n.a.createElement(k.a,{container:!0,item:!0,direction:"column",align:"center",justify:"center",xs:10,sm:4,md:4,lg:4,xl:4,style:{margin:10}},n.a.createElement(S.a,{variant:"body1"},"Real account"),n.a.createElement(k.a,{container:!0,alignItems:"center",justify:"space-between",item:!0,style:{marginVertical:5}},n.a.createElement(S.a,{variant:"body1"},this.props.p_real.portfolio.active?"Active":"Inactive"),n.a.createElement(De.a,{name:"demo_active",checked:!0===this.props.p_real.portfolio.active,onChange:function(){e.props.update_portfolio({active:!0===e.props.p_real.portfolio.active?"False":"True",portfolio_type:"True"})}})),n.a.createElement(k.a,{container:!0,alignItems:"center",justify:"space-between",item:!0,style:{marginVertical:5}},n.a.createElement(S.a,{variant:"body1"},"Neural network"),n.a.createElement(S.a,{variant:"body1"},this.props.p_real.portfolio.neural_network.nn_name)),n.a.createElement(k.a,{container:!0,alignItems:"center",justify:"space-between",item:!0,style:{marginVertical:5}},n.a.createElement(S.a,{variant:"body1"},"Stop loss"),n.a.createElement(L.a,{labelId:"stop_loss_select_demo",id:"stop_loss_select_demo",value:null===this.props.p_real.portfolio.stop_loss?"None":this.props.p_real.portfolio.stop_loss,onChange:function(t){e.props.update_portfolio({stop_loss:"None"===t.target.value?null:t.target.value,portfolio_type:"True"})}},n.a.createElement(T.a,{value:"None"},"None"),n.a.createElement(T.a,{value:.01},"1%"),n.a.createElement(T.a,{value:.025},"2,5%"),n.a.createElement(T.a,{value:.05},"5%"),n.a.createElement(T.a,{value:.1},"10%"),n.a.createElement(T.a,{value:.15},"15%"),n.a.createElement(T.a,{value:.2},"20%"))),n.a.createElement(k.a,{container:!0,alignItems:"center",justify:"space-between",item:!0,style:{marginVertical:5}},n.a.createElement(S.a,{variant:"body1"},"Take profit"),n.a.createElement(L.a,{labelId:"take_profit_select_demo",id:"take_profit_select_demo",value:null===this.props.p_real.portfolio.take_profit?"None":this.props.p_real.portfolio.take_profit,onChange:function(t){e.props.update_portfolio({take_profit:"None"===t.target.value?null:t.target.value,portfolio_type:"True"})}},n.a.createElement(T.a,{value:"None"},"None"),n.a.createElement(T.a,{value:.1},"10%"),n.a.createElement(T.a,{value:.15},"15%"),n.a.createElement(T.a,{value:.2},"20%"),n.a.createElement(T.a,{value:.3},"30%"),n.a.createElement(T.a,{value:.4},"40%"),n.a.createElement(T.a,{value:.5},"50%"),n.a.createElement(T.a,{value:1},"100%"))),n.a.createElement(k.a,{container:!0,alignItems:"center",justify:"space-between",item:!0,style:{marginVertical:5}},n.a.createElement(S.a,{variant:"body1"},"Position size (% of total asset)"),n.a.createElement(L.a,{labelId:"pos_size_select_demo",id:"pos_size_select_demo",value:null===this.props.p_real.portfolio.pos_size?"None":this.props.p_real.portfolio.pos_size,onChange:function(t){e.props.update_portfolio({pos_size:t.target.value,portfolio_type:"False"})}},n.a.createElement(T.a,{value:.01},"1%"),n.a.createElement(T.a,{value:.05},"5%"),n.a.createElement(T.a,{value:.1},"10%"),n.a.createElement(T.a,{value:.15},"15%"),n.a.createElement(T.a,{value:.2},"20%"),n.a.createElement(T.a,{value:.3},"30%")))),n.a.createElement(k.a,{item:!0,xs:10,style:{margin:10}},n.a.createElement(xe.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:function(){e.props.update_user(e.state)}},"Update account"),n.a.createElement(Ne.a,{style:{margin:10}}),n.a.createElement(xe.a,{type:"submit",fullWidth:!0,variant:"contained",onClick:function(){e.props.logout()}},"Logout")))}}]),a}(n.a.Component),Le=Object(j.a)({},{withTheme:!0})(Ie),Te=a(504),Fe=a(495),Me=a(496),Pe=a(497),We=a(490),Re=a(443),ze=a(498),Ge=a(502),He=a(510),Ue=a(218),Je=a.n(Ue),Ae=a(219),Ke=a.n(Ae),Ze=a(217),Ve=a.n(Ze),Be=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).toggle_drawer=function(){r.setState({drawer_open:!r.state.drawer_open})},r.drawer=function(){return n.a.createElement(Te.a,{anchor:"left",open:r.state.drawer_open,onClose:function(){r.toggle_drawer()},onOpen:function(){r.toggle_drawer()}},n.a.createElement(S.a,null,n.a.createElement(Fe.a,{href:"/",style:{padding:10}},"Home"),n.a.createElement(Fe.a,{href:"/portfolio",style:{padding:10}},"Portfolio"),n.a.createElement(Fe.a,{href:"/market",style:{padding:10}},"Market"),n.a.createElement(Fe.a,{href:"/model",style:{padding:10}},"Model")))},r.state={drawer_open:!1},r}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.theme;return n.a.createElement(Me.a,{position:"static",style:{marginBottom:20}},n.a.createElement(D.a,null,n.a.createElement(Pe.a,{style:{justifyContent:"space-between"}},n.a.createElement($.a,{lgUp:!0},n.a.createElement(ke.a,{edge:"start","aria-label":"menu",onClick:function(){e.toggle_drawer()}},n.a.createElement(Ve.a,null))),n.a.createElement($.a,{mdDown:!0},n.a.createElement(We.a,{className:a.appBar_list},n.a.createElement(Re.a,{button:!0,component:"a",key:"home",href:"/"},n.a.createElement(ze.a,{primary:"Home"})),n.a.createElement(Re.a,{button:!0,component:"a",key:"order",href:"/order"},n.a.createElement(ze.a,{primary:"Orders"})),n.a.createElement(Re.a,{button:!0,component:"a",key:"history",href:"/history"},n.a.createElement(ze.a,{primary:"History"})),n.a.createElement(Re.a,{button:!0,component:"a",key:"market",href:"/market"},n.a.createElement(ze.a,{primary:"Market"})))),n.a.createElement(Ge.a,null,n.a.createElement(De.a,{checked:this.props.portfolio_type,onChange:function(){e.props.handlePortfolioChange()},name:"portfolio_type"}),n.a.createElement(ke.a,{onClick:function(){e.props.handleThemeChange()}},"dark"===r.palette.type?n.a.createElement(Je.a,null):n.a.createElement(Ke.a,null)),n.a.createElement(ke.a,{href:"/profile"},n.a.createElement(He.a,null)))),n.a.createElement(Te.a,{anchor:"left",open:this.state.drawer_open,onClose:function(){e.toggle_drawer()},onOpen:function(){e.toggle_drawer()}},n.a.createElement(We.a,{className:a.drawer_list},n.a.createElement(Re.a,{button:!0,component:"a",key:"home",href:"/"},n.a.createElement(ze.a,{primary:"Home"})),n.a.createElement(Re.a,{button:!0,component:"a",key:"orders",href:"/order"},n.a.createElement(ze.a,{primary:"Orders"})),n.a.createElement(Re.a,{button:!0,component:"a",key:"history",href:"/history"},n.a.createElement(ze.a,{primary:"History"})),n.a.createElement(Re.a,{button:!0,component:"a",key:"market",href:"/market"},n.a.createElement(ze.a,{primary:"Market"}))))))}}]),a}(n.a.Component),qe=Object(j.a)({drawer_list:{width:250},appBar_list:{display:"flex",flexDirection:"row",padding:0}},{withTheme:!0})(Be),$e=a(505),Xe=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).state={active_index:0},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){console.log("Toast"),console.log(this.props)}},{key:"render",value:function(){var e=this.props;e.classes,e.theme,e.portfolio;return n.a.createElement($e.a,{variant:"filled",severity:this.props.type,style:{position:"absolute",bottom:10,left:10,minWidth:100,opacity:this.props.opacity}},this.props.message)}}]),a}(n.a.Component),Ye=Object(j.a)({},{withTheme:!0})(Xe),Qe=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).handleChange=function(e){r.setState(Object(p.a)({},e.target.name,e.target.value))},r.handlePortfolioChange=function(){localStorage.setItem("portfolio_type",!r.state.portfolio_type),r.setState({portfolio_type:!r.state.portfolio_type})},r.handleThemeChange=function(){"light"===r.state.theme?(localStorage.setItem("theme","dark"),r.setState({theme:"dark"})):(localStorage.setItem("theme","light"),r.setState({theme:"light"}))},r.retrieveHome=function(){console.log("retrieveHome"),r.setState({loading:!0}),M("api/home/").then((function(e){if(200===e.status){var t=JSON.parse(e.response);console.log(t),r.setState({p_demo:t.p_demo,p_real:t.p_real,loading:!1}),localStorage.setItem("p_demo",JSON.stringify(t.p_demo)),localStorage.setItem("p_real",JSON.stringify(t.p_real))}401===e.status&&(console.log("Unauthorized"),r.logout())}))},r.sign_up=function(){var e=Object(c.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setState({errors:{}}),P("api/user/",t).then((function(e){var t=JSON.parse(e.response);if(201===e.status)localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user)),r.setState({logged_in:!0,user:t.user});else{var a=r.state.errors;for(var n in t)a[n]=t[n];r.setState({errors:a})}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.log_in=function(){var e=Object(c.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setState({errors:{}}),P("api/token-auth/",t).then((function(e){var t=JSON.parse(e.response);if(200===e.status)localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user)),r.setState({logged_in:!0,user:t.user});else{var a=r.state.errors;for(var n in t)a[n]=t[n];r.setState({errors:a})}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.logout=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.clear(),r.setState({logged_in:!1,user:{},errors:{}});case 2:case"end":return e.stop()}}),e)}))),r.update_user=function(){var e=Object(c.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("update_user"),r.setState({errors:{}}),console.log(t),W("api/user/",t).then((function(e){console.log(e);var t=JSON.parse(e.response);if(201===e.status)localStorage.setItem("user",JSON.stringify(t.user)),r.setState({user:t.user}),r.display_toast("Account updated!","success");else{var a=r.state.errors;for(var n in t)a[n]=t[n];r.setState({errors:a})}}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.update_portfolio=function(){var e=Object(c.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("update_portfolio"),r.setState({errors:{}}),console.log(t),W("api/portfolio/",t).then((function(e){var t=JSON.parse(e.response);if(console.log(t.portfolio),201===e.status){if(!0===t.portfolio.portfolio_type){var a=r.state.p_real;a.portfolio=t.portfolio,localStorage.setItem("p_real",JSON.stringify(a)),r.setState({p_real:a})}else{var n=r.state.p_demo;n.portfolio=t.portfolio,localStorage.setItem("p_demo",JSON.stringify(n)),r.setState({p_demo:n})}r.display_toast("Portfolio updated!","success")}else{var o=r.state.errors;for(var i in t)o[i]=t[i];r.setState({errors:o})}}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.display_toast=function(){var e=Object(c.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setState({opacity:1,message:t,message_type:a},(function(){return setTimeout((function(){return r.setState({opacity:0})}),4e3)}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),r.state={message:null,message_type:null,opacity:0,theme:localStorage.getItem("theme"),logged_in:!!localStorage.getItem("token"),user:JSON.parse(localStorage.getItem("user")),portfolio_type:"true"===localStorage.getItem("portfolio_type"),errors:{},p_demo:JSON.parse(localStorage.getItem("p_demo")),p_real:JSON.parse(localStorage.getItem("p_real")),loading:!1},r}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement(E.a,{theme:"light"===this.state.theme?Object(y.a)(w):Object(y.a)(b)},n.a.createElement(_.a,null,n.a.createElement(f.a,null),n.a.createElement(g.d,null,!this.state.logged_in&&n.a.createElement(r.Fragment,null,n.a.createElement(g.b,{exact:!0,path:"/",render:function(t){return n.a.createElement(Ce,Object.assign({},t,{sign_up:function(t){e.sign_up(t)},log_in:function(t){e.log_in(t)},handleChange:function(t){e.handleChange(t)},errors:e.state.errors}))}}),n.a.createElement(g.a,{from:"*",to:"/"})),this.state.logged_in&&n.a.createElement(r.Fragment,null,n.a.createElement(qe,{handleThemeChange:function(){e.handleThemeChange()},handlePortfolioChange:function(){e.handlePortfolioChange()},portfolio_type:this.state.portfolio_type}),null!==this.state.message&&n.a.createElement(Ye,{type:this.state.message_type,message:this.state.message,opacity:this.state.opacity}),n.a.createElement(g.d,null,n.a.createElement(g.b,{exact:!0,path:"/",render:function(t){return n.a.createElement(oe,Object.assign({},t,{retrieve_home:function(){e.retrieveHome()},loading:e.state.loading,p_demo:e.state.p_demo,p_real:e.state.p_real,user:e.state.user,portfolio_type:e.state.portfolio_type,logout:function(){e.logout()}}))}}),n.a.createElement(g.b,{path:"/portfolio",render:function(t){return n.a.createElement(se,Object.assign({},t,{portfolio_type:e.state.portfolio_type}))}}),n.a.createElement(g.b,{path:"/position",render:function(t){return n.a.createElement(ue,Object.assign({},t,{portfolio_type:e.state.portfolio_type}))}}),n.a.createElement(g.b,{path:"/buy_order",render:function(t){return n.a.createElement(me,Object.assign({},t,{portfolio_type:e.state.portfolio_type}))}}),n.a.createElement(g.b,{path:"/order",render:function(t){return n.a.createElement(_e,Object.assign({},t,{portfolio_type:e.state.portfolio_type}))}}),n.a.createElement(g.b,{path:"/history",render:function(t){return n.a.createElement(je,Object.assign({},t,{portfolio_type:e.state.portfolio_type}))}}),n.a.createElement(g.b,{path:"/market",render:function(t){return n.a.createElement(fe,Object.assign({},t,{user:e.state.user,portfolio_type:e.state.portfolio_type,p_demo:e.state.p_demo,p_real:e.state.p_real}))}}),n.a.createElement(g.b,{path:"/model",render:function(t){return n.a.createElement(Ee,Object.assign({},t,{user:e.state.user}))}}),n.a.createElement(g.b,{path:"/profile",render:function(t){return n.a.createElement(Le,Object.assign({},t,{user:e.state.user,p_demo:e.state.p_demo,p_real:e.state.p_real,update_user:function(t){e.update_user(t)},logout:function(){e.logout()},handleChange:function(t){e.handleChange(t)},errors:e.state.errors,update_portfolio:function(t){e.update_portfolio(t)}}))}}),n.a.createElement(g.b,{path:"/404",render:function(e){return n.a.createElement(x,e)}}),n.a.createElement(g.a,{to:"/404"}))))))}}]),a}(n.a.Component);i.a.render(n.a.createElement(Qe,null),document.getElementById("root"))}},[[255,1,2]]]);
//# sourceMappingURL=main.78a3e718.chunk.js.map